<html><head><link href="stylesheets/program.css" rel="stylesheet" title="program" type="text/css" /> <title>Source file</title></head><body bgcolor="#ffffff" text="#000000" link="#000000" vlink="#000000"><font family="Monospace"><pre><div class="schemedoc-section-comment">;;; Layout functions
;;; .section-id layout-load
;;; - This section contains the layout drawing functions</div>
<a name="TcfAddIDLayers"></a><a name="TcfAddIDLayers"></a><span><a href="../layout2func.html#TcfAddIDLayers"><img src="./images/small-prev.gif" title="Skill/Skill++Doc Manual entry" alt="" border="0" /></a> <br /></span>(<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_7.html#IDX173" title="R5RS Skill/Skill++ form">defun</a> <span class="signature">TcfAddIDLayers</span> (libName cells lpps @key (fullCV nil))
  (let (pllst cv)
 (setq pllst (parseString lpps ";"))
 (foreachs cellName cells
  (setq cv (dbOpenCellViewByType libName cellName  "layout" "maskLayout" "a"))
  (foreachs lpp pllst
   (<a class="applied-name" href="layout2func-1.html#TcfAddIDLayer" title="layout2func">TcfAddIDLayer</a> cv (parseString lpp " ") ?fullCV fullCV))
  (dbSave cv)
  (dbClose cv))
  )) 
<a name="TcfAddIDPurposes"></a><a name="TcfAddIDPurposes"></a><span><a href="../layout2func.html#TcfAddIDPurposes"><img src="./images/small-prev.gif" title="Skill/Skill++Doc Manual entry" alt="" border="0" /></a> <br /></span>(<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_7.html#IDX173" title="R5RS Skill/Skill++ form">defun</a> <span class="signature">TcfAddIDPurposes</span> (libName cells purposes @key (fullCV nil))
  (let (cv purlist cvlays)
 (setq purlist (parseString purposes " "))
 (foreachs cellName cells
  (setq cv (dbOpenCellViewByType libName cellName  "layout" "maskLayout" "a"))
  (setq cvlays (TcfRemoveLstDuplicateItems cv~>lpps~>layerName))
  (foreachs lay cvlays
   (foreachs pur purlist
 (when (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX118" title="R5RS Skill/Skill++ form">or</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX340" title="R5RS Skill/Skill++ form">member</a> lay (TcfGetDefaultKeepGenAwayLayers)) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX304" title="R5RS Skill/Skill++ form">not</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX340" title="R5RS Skill/Skill++ form">member</a> pur (TcfGetDefaultLPPFillerKeepGenAwayPurpose ?cvId cv))))
   (TccInfo "TcfAddIDPurposes" (sprintf nil "Adding purposes for %L" lay))
   (<a class="applied-name" href="layout2func-1.html#TcfAddIDLayer" title="layout2func">TcfAddIDLayer</a> cv (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> lay pur) ?fullCV fullCV)
  )))
  (dbSave cv)
  (dbClose cv))
  )) 
<a name="TcfAddIDLayer"></a><a name="TcfAddIDLayer"></a><span><a href="../layout2func.html#TcfAddIDLayer"><img src="./images/small-prev.gif" title="Skill/Skill++Doc Manual entry" alt="" border="0" /></a> <br /></span>(<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_7.html#IDX173" title="R5RS Skill/Skill++ form">defun</a> <span class="signature">TcfAddIDLayer</span> (cv lpp @key (sx 0) (sy 0) (fullCV nil))
  "Add the given layer to match the BBox"
  (let (techid outputshapes listofshapes listofBBoxes)
 (setq techid (techGetTechFile cv))
 (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX118" title="R5RS Skill/Skill++ form">or</a> fullCV (equal (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX325" title="R5RS Skill/Skill++ form">cadr</a> lpp) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX321" title="R5RS Skill/Skill++ form">car</a> (TcfGetDefaultLPPFillerKeepGenAwayPurpose ?cvId cv))))
  (setq listofBBoxes (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> (getSGq cv bBox)))
   (setq listofBBoxes (TcfGetBoundingBoxes cv))
  ) 
 (foreachs bBox listofBBoxes
  (setq listofshapes (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX320" title="R5RS Skill/Skill++ form">cons</a> (dbCreateRect cv (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "red" (TcfGetDefaultLPPDebugPurpose)) bBox) listofshapes))
  ) 
 (setq listofshapes (TccFlattenList (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> listofshapes)))

 (when (techGetLP techid lpp)
   (TccInfo "TcfAddIDLayer" (sprintf nil "Adding ID layer %L over boxes %L" lpp listofBBoxes))
   (mapcar 'dbDeleteObject (setofs shapes cv~>shapes (equal shapes~>lpp lpp)))
   (setq outputshapes (TcfLayerSize cv lpp listofshapes sx sy))
  ) 
 (mapcar 'dbDeleteObject listofshapes)
 (TccFlattenList (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> outputshapes))
  )) 
<a name="TcfCreateArrayLine"></a>
<a name="TcfCreateArrayLine"></a><span><a href="../layout2func.html#TcfCreateArrayLine"><img src="./images/small-prev.gif" title="Skill/Skill++Doc Manual entry" alt="" border="0" /></a> <br /></span>(<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_7.html#IDX173" title="R5RS Skill/Skill++ form">defun</a> <span class="signature">TcfCreateArrayLine</span> (@key (cvId nil) (layerNameLPP (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "metal0" (TcfGetDefaultLPPPurpose))) (direction "H") (offsetX 0.0) (offsetY 0.0) (width 0.01) (pitch 0.02) (bBox (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> 0.0 0.0) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> 1.0 1.0))) (lstCutBBoxes nil) (lstCutShapes nil) (isInvert nil) (addVia nil) (viaLayerLPP (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "via0" (TcfGetDefaultLPPPurpose))) (viaSizeX 0.01) (viaSizeY 0.01) (viaSkip 0) (viaSpc 0.01) (isInside nil) (isCutStrict nil) (keepAwayDistX nil) (keepAwayDistY nil) (linePullBack 0.0) (lstSegPropLst nil) (flushendinglines nil))
  "This function draws an array of lines with specific cut boxes. Supports inversion of the pattern with respect to bBox."

  (let (lineLength lineWidth spaceX spaceY bBoxLines offsetXc offsetYc bBoxVias bBox_L bBox_W lineShapes lstCutBBoxesFixed
 xtofix_ll xfixed_ll xtofix_ur xfixed_ur ytofix_ur ytofix_ll yfixed_ll yfixed_ur
 step1TccDebug step3TccDebug step4TccDebug step5TccDebug blueTccDebug greenTccDebug layerNameLPP_drawing plugLayerLPP_drawing viaLayerLPP_drawing bBox_out listofshapes viaTmp yellowTccDebug xor1TccDebug orangeTccDebug purpleTccDebug greyTccDebug outputDPL bBox_in X_ur X_ll Y_ur Y_ll yellowTccDebug_x step10TccDebug)

  (foreachs elem (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> lstSegPropLst (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX334" title="R5RS Skill/Skill++ form">append</a> lstCutBBoxes (TcfCalculateLstBBoxes
  ?lstSegPropLst lstSegPropLst
  ?XOffset (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (equal direction "H") offsetX 0.0)
  ?YOffset (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (equal direction "V") offsetY 0.0)
  ?orthoBBoxDim (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (equal direction "H") (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX325" title="R5RS Skill/Skill++ form">cadr</a>  (trBBoxDims bBox)) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX321" title="R5RS Skill/Skill++ form">car</a> (trBBoxDims bBox)))
  ?direction direction
  )) lstCutBBoxes)
  (setq orangeTccDebug (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX320" title="R5RS Skill/Skill++ form">cons</a> (dbCreateRect cvId
 (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "orange" (TcfGetDefaultLPPDebugPurpose ?cvId cvId))
 elem
  ) orangeTccDebug))
  ) (setq greyTccDebug (dbLayerOr cvId (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "grey" (TcfGetDefaultLPPDebugPurpose ?cvId cvId)) orangeTccDebug lstCutShapes))

  (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> isInside
  (progn
 (setq X_ur (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX411" title="R5RS Skill/Skill++ form">apply</a> 'max (mapcar (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX98" title="R5RS Skill/Skill++ form">lambda</a> (<span class="local-name-binding">x</span>) (xCoord (upperRight (getSGq x bBox)))) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX334" title="R5RS Skill/Skill++ form">append</a> orangeTccDebug lstCutShapes))))
 (setq Y_ur (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX411" title="R5RS Skill/Skill++ form">apply</a> 'max (mapcar (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX98" title="R5RS Skill/Skill++ form">lambda</a> (<span class="local-name-binding">x</span>) (yCoord (upperRight (getSGq x bBox)))) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX334" title="R5RS Skill/Skill++ form">append</a> orangeTccDebug lstCutShapes))))
 (setq X_ll (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX411" title="R5RS Skill/Skill++ form">apply</a> 'min (mapcar (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX98" title="R5RS Skill/Skill++ form">lambda</a> (<span class="local-name-binding">x</span>) (xCoord (lowerLeft (getSGq x bBox)))) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX334" title="R5RS Skill/Skill++ form">append</a> orangeTccDebug lstCutShapes))))
 (setq Y_ll (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX411" title="R5RS Skill/Skill++ form">apply</a> 'min (mapcar (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX98" title="R5RS Skill/Skill++ form">lambda</a> (<span class="local-name-binding">x</span>) (yCoord (lowerLeft (getSGq x bBox)))) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX334" title="R5RS Skill/Skill++ form">append</a> orangeTccDebug lstCutShapes))))
 (setq bBox_in (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> X_ll Y_ll) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> X_ur Y_ur)))
  ) 
   (setq bBox_in bBox)
  ) 
  (setq bBox_W (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX321" title="R5RS Skill/Skill++ form">car</a>  (trBBoxDims bBox_in)))
 (setq bBox_L (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX325" title="R5RS Skill/Skill++ form">cadr</a>  (trBBoxDims bBox_in)))

  (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (equal direction "V")
  (progn
 (setq offsetXc (difference offsetX (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX258" title="R5RS Skill/Skill++ form">quotient</a> width 2)))
 (setq offsetYc offsetY)
  ) 
   (progn
  (setq offsetXc offsetX)
  (setq offsetYc (difference offsetY (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX258" title="R5RS Skill/Skill++ form">quotient</a> width 2)))
  )) 
 (setq bBoxLines (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> (rodAddPoints (lowerLeft bBox_in) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> offsetXc offsetYc))
  (rodSubPoints (upperRight bBox_in) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> offsetXc offsetYc))))

  (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (equal direction "V")
  (progn
 (setq lineLength (difference bBox_L (times 2 offsetY))-linePullBack) (setq lineWidth width)
 (setq spaceX (difference pitch width))
 (setq spaceY 1)
  ) 
   (progn
  (setq lineLength width)
  (setq lineWidth (difference bBox_W (times 2 offsetX))-linePullBack) (setq spaceX 1)
  (setq spaceY (difference pitch width))
  )) 
  (setq bBox_out (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> (dbCreateRect cvId (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "chkBoundary" "boundary")
   (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> isInside bBox_in bBox))))

  (setq blueTccDebug (rodFillBBoxWithRects ?cvId cvId
   ?layer (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "blue" (TcfGetDefaultLPPDebugPurpose ?cvId cvId))
   ?width lineWidth
   ?length lineLength
   ?fillBBox bBoxLines
   ?gap "minimum"
   ?spaceX spaceX
   ?spaceY spaceY))

 (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX117" title="R5RS Skill/Skill++ form">and</a> keepAwayDistX keepAwayDistY)
  (TccInfo "TcfCreateArrayLines" (sprintf nil "KeepAwayDistX=%L,KeepAwayDistY=%L" keepAwayDistX keepAwayDistY))
  ) 
  (setq purpleTccDebug (TcfLayerSize cvId (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "purple" (TcfGetDefaultLPPDebugPurpose ?cvId cvId)) greyTccDebug
   (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> isCutStrict (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> isInside -1 1)<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX250" title="R5RS Skill/Skill++ form">*</a>(<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (equal direction "V")
   (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> keepAwayDistX keepAwayDistX offsetX-width/2)
 (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> keepAwayDistX keepAwayDistX offsetX))
 0.0) (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> isCutStrict (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> isInside -1 1)<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX250" title="R5RS Skill/Skill++ form">*</a>(<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (equal direction "V")
   (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> keepAwayDistY keepAwayDistY offsetY)
 (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> keepAwayDistY keepAwayDistY offsetY-width/2))
 0.0))) 
 (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> isInside
  (setq xor1TccDebug (dbLayerAndNot cvId (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "xor1" (TcfGetDefaultLPPDebugPurpose ?cvId cvId)) bBox_out purpleTccDebug 4)) (setq xor1TccDebug (dbLayerAnd cvId (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "xor1" (TcfGetDefaultLPPDebugPurpose ?cvId cvId)) bBox_out purpleTccDebug 4)) )

  (foreachs elem (mapcar (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX98" title="R5RS Skill/Skill++ form">lambda</a> (<span class="local-name-binding">x</span>) (getSGq x bBox)) xor1TccDebug) (setq listofshapes (dbGetTrueOverlaps
 cvId
 elem
 (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "blue" (TcfGetDefaultLPPDebugPurpose ?cvId cvId))
 0:32
  ))
  (when listofshapes
  (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (equal direction "V")

  (progn
 (setq xfixed_ll (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX411" title="R5RS Skill/Skill++ form">apply</a> 'min (mapcar (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX98" title="R5RS Skill/Skill++ form">lambda</a> (<span class="local-name-binding">x</span>) (xCoord (lowerLeft (getSGq x bBox)))) listofshapes )))
 (setq xfixed_ur (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX411" title="R5RS Skill/Skill++ form">apply</a> 'max (mapcar (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX98" title="R5RS Skill/Skill++ form">lambda</a> (<span class="local-name-binding">x</span>) (xCoord (upperRight (getSGq x bBox)))) listofshapes )))
 (setq yfixed_ll (yCoord (lowerLeft elem)))
 (setq yfixed_ur (yCoord (upperRight elem)))
  ) (progn
  (setq yfixed_ll (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX411" title="R5RS Skill/Skill++ form">apply</a> 'min (mapcar (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX98" title="R5RS Skill/Skill++ form">lambda</a> (<span class="local-name-binding">x</span>) (yCoord (lowerLeft (getSGq x bBox)))) listofshapes )))
  (setq yfixed_ur (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX411" title="R5RS Skill/Skill++ form">apply</a> 'max (mapcar (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX98" title="R5RS Skill/Skill++ form">lambda</a> (<span class="local-name-binding">x</span>) (yCoord (upperRight (getSGq x bBox)))) listofshapes )))
  (setq xfixed_ll (xCoord (lowerLeft elem)))
  (setq xfixed_ur (xCoord (upperRight elem)))
  )) (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX118" title="R5RS Skill/Skill++ form">or</a> (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX117" title="R5RS Skill/Skill++ form">and</a> (equal direction "V") (lessp pitch xfixed_ur-xfixed_ll)) (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX117" title="R5RS Skill/Skill++ form">and</a> (equal direction "H") (lessp pitch yfixed_ur-yfixed_ll)))
  (setq lstCutBBoxesFixed (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX334" title="R5RS Skill/Skill++ form">append</a> lstCutBBoxesFixed (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> xfixed_ll yfixed_ll) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> xfixed_ur yfixed_ur)) )))
  )) ) 
  (foreachs elem lstCutBBoxesFixed
 (setq yellowTccDebug_x (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX320" title="R5RS Skill/Skill++ form">cons</a> (dbCreateRect cvId (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "yellow" (TcfGetDefaultLPPDebugPurpose ?cvId cvId))
   elem) yellowTccDebug_x))
  ) 
  (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> isInside
  (setq yellowTccDebug (TcfLayerSize cvId (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "step6" (TcfGetDefaultLPPDebugPurpose ?cvId cvId)) yellowTccDebug_x (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (equal direction "V") 0.0 offsetX) (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (equal direction "V") offsetY 0.0)))
   (setq yellowTccDebug yellowTccDebug_x)
  )

  (setq lineShapes blueTccDebug)
 (setq greenTccDebug (dbLayerAndNot cvId (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "green" (TcfGetDefaultLPPDebugPurpose ?cvId cvId))
   lineShapes
   yellowTccDebug ))

  (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> isInvert
  (progn
 (setq step10TccDebug (TcfLayerSize cvId (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "step10" (TcfGetDefaultLPPDebugPurpose ?cvId cvId)) orangeTccDebug (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> keepAwayDistX -keepAwayDistX 0.0) (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> keepAwayDistY -keepAwayDistY 0.0)))
 (setq layerNameLPP_drawing (dbLayerAndNot cvId layerNameLPP
 (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> isInside step10TccDebug bBox_out)
 (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> isInside greenTccDebug (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX334" title="R5RS Skill/Skill++ form">append</a> yellowTccDebug greenTccDebug))
  ))
  ) 
   (setq layerNameLPP_drawing (dbLayerOr cvId layerNameLPP greenTccDebug nil))
  ) 
  (when addVia

   (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (equal direction "V")
 (setq bBoxVias (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> (rodAddPoints (lowerLeft bBoxLines) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> width/2-viaSizeX/2 viaSpc  ))
 (rodSubPoints (upperRight bBoxLines) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> width/2-viaSizeX/2 viaSpc))))
  (setq bBoxVias (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> (rodAddPoints (lowerLeft bBoxLines) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> viaSpc width/2-viaSizeY/2   ))
  (rodSubPoints (upperRight bBoxLines) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> viaSpc width/2-viaSizeY/2))))
  ) 
   (setq step1TccDebug (rodFillBBoxWithRects ?cvId cvId
   ?layer (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "step1" (TcfGetDefaultLPPDebugPurpose ?cvId cvId))
   ?width viaSizeX
   ?length viaSizeY
   ?fillBBox bBoxVias
   ?gap "minimum"
   ?spaceX (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (equal direction "V") (viaSkip+1)*pitch-viaSizeX viaSpc )
   ?spaceY (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (equal direction "V") viaSpc (viaSkip+1)*pitch-viaSizeY )
  ))

   
   (setq viaTmp (TcfLayerSize cvId (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "step2"
  (TcfGetDefaultLPPDebugPurpose ?cvId cvId))
   yellowTccDebug
   (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (equal direction "V") 0.0 viaSpc)
   (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (equal direction "V") viaSpc 0.0)
  ))

   (setq viaLayerLPP_drawing (dbLayerOutside cvId viaLayerLPP
   step1TccDebug
   viaTmp
  ))
  ) 
  (foreachs elem (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> viaTmp greenTccDebug blueTccDebug orangeTccDebug  step1TccDebug  greyTccDebug  purpleTccDebug yellowTccDebug xor1TccDebug)
  (mapcar 'dbDeleteObject elem)
  ) 
  (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> isInside
  (mapcar 'dbDeleteObject (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX334" title="R5RS Skill/Skill++ form">append</a> yellowTccDebug_x step10TccDebug))
  )

  (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> flushendinglines
  (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (equal direction "H")
   (progn
  (dbCreateRect cvId layerNameLPP
 (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a>
  (lowerLeft bBox)
  (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> (xCoord (upperRight bBox)) (plus (yCoord (lowerLeft bBox)) (difference offsetY (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX258" title="R5RS Skill/Skill++ form">quotient</a> width 2))))
  )) (dbCreateRect cvId layerNameLPP
 (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a>
  (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> (xCoord (lowerLeft bBox)) (yCoord (upperRight (trBBoxUnion (TccFlattenList layerNameLPP_drawing)~>bBox))))
  (upperRight bBox)
  )) ) 
 (progn
   (TccWarn "TcfCreateArrayLine" "Ending lines for V direction are not yet implemented.")
  )) ) 
  (setq outputDPL (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> nil))
 (putprop outputDPL lstCutBBoxesFixed 'lstCutBBoxesFixed)
 (putprop outputDPL layerNameLPP_drawing 'lstOutputShapes)

  outputDPL

  )) 
<a name="TcfCreateExactTermRing"></a>
<a name="TcfCreateExactTermRing"></a><span><a href="../layout2func.html#TcfCreateExactTermRing"><img src="./images/small-prev.gif" title="Skill/Skill++Doc Manual entry" alt="" border="0" /></a> <br /></span>(<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_7.html#IDX173" title="R5RS Skill/Skill++ form">defun</a> <span class="signature">TcfCreateExactTermRing</span> (cvId lstOuterShape WX WY @key (outputLayer (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "polybb" (TcfGetDefaultLPPPurpose))) (polyPitch 0.12) (lstCutShapes nil) (TermLineOverlapX 0.0) (TermLineOverlapY 0.0) (addPolyPitchId nil))
  (let (exactshape reducedshape termshape reducedshapeid (outputDPL (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> nil)))

 (setq exactshape (dbLayerAndNot cvId (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "green" (TcfGetDefaultLPPDebugPurpose ?cvId cvId)) lstOuterShape lstCutShapes))
 (setq reducedshape (TcfLayerSize cvId (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "yellow" (TcfGetDefaultLPPDebugPurpose ?cvId cvId)) exactshape -WX -WY))
 (setq termshape (dbLayerAndNot cvId outputLayer exactshape reducedshape))

  (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> addPolyPitchId
  (setq reducedshapeid (TcfLayerSize cvId (TcfGetPolyPitchID polyPitch) exactshape -WX+TermLineOverlapX -WY+TermLineOverlapY))
  ) 
  (foreachs elem (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> exactshape reducedshape)
  (mapcar 'dbDeleteObject elem)
  ) 
  (TccFlattenList (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> termshape))

  ) 
  ) 
<a name="TcfCreateArrayLineTermRing"></a>
<a name="TcfCreateArrayLineTermRing"></a><span><a href="../layout2func.html#TcfCreateArrayLineTermRing"><img src="./images/small-prev.gif" title="Skill/Skill++Doc Manual entry" alt="" border="0" /></a> <br /></span>(<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_7.html#IDX173" title="R5RS Skill/Skill++ form">defun</a> <span class="signature">TcfCreateArrayLineTermRing</span> (cvId lstLineShapes direction pitch lineCD WX WY outputLayer @key (TermLineOverlapX 0.08) (TermLineOverlapY 0.08) (polyPitch 0.12) (addPolyPitchId nil) (disableOuterRing nil)) (let (step8TccDebug step9TccDebug xor1TccDebug termshape xor2TccDebug lstOuterShape)

  (setq step8TccDebug (TcfLayerSize cvId (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "step8" (TcfGetDefaultLPPDebugPurpose ?cvId cvId)) lstLineShapes
  (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (equal direction "V") pitch-lineCD 0.0)
  (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (equal direction "V") 0.0 pitch-lineCD)
  ))

  (setq step9TccDebug (dbLayerOr cvId (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "step9" (TcfGetDefaultLPPDebugPurpose ?cvId cvId)) step8TccDebug nil))

  (setq xor1TccDebug (TcfLayerSize cvId (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "xor1" (TcfGetDefaultLPPDebugPurpose ?cvId cvId)) step9TccDebug
 (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (equal direction "V") -pitch+WX WX)
 (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (equal direction "V") WY -pitch+WY)
  ))

  (setq xor2TccDebug (<a class="applied-name" href="layout2func-1.html#TcfCreateExactTermRing" title="layout2func">TcfCreateExactTermRing</a> cvId
  xor1TccDebug   WX   WY   ?outputLayer (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "xor2" (TcfGetDefaultLPPDebugPurpose ?cvId cvId)) ?polyPitch pitch   ?lstCutShapes nil
  ?TermLineOverlapX TermLineOverlapX
  ?TermLineOverlapY TermLineOverlapY
  ?addPolyPitchId addPolyPitchId
  ))

 (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> disableOuterRing
  (progn
 (setq lstOuterShape (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> (dbCreateRect cvId (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "blue" (TcfGetDefaultLPPDebugPurpose ?cvId cvId))
  (trBBoxUnion (mapcar (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX98" title="R5RS Skill/Skill++ form">lambda</a> (<span class="local-name-binding">x</span>) (getSGq x bBox)) lstLineShapes))
  )))
 (setq termshape (dbLayerInside cvId outputLayer xor2TccDebug lstOuterShape))
 (dbDeleteObject (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX321" title="R5RS Skill/Skill++ form">car</a> lstOuterShape))
  ) (setq termshape (dbLayerOr cvId outputLayer xor2TccDebug nil))
  ) 
  (foreachs elem (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> step8TccDebug step9TccDebug xor1TccDebug xor2TccDebug)
  (mapcar 'dbDeleteObject elem)
  ) 
  (TccFlattenList (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> termshape))

  )) 
<a name="TcfAddTermLine"></a><a name="TcfAddTermLine"></a><span><a href="../layout2func.html#TcfAddTermLine"><img src="./images/small-prev.gif" title="Skill/Skill++Doc Manual entry" alt="" border="0" /></a> <br /></span>(<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_7.html#IDX173" title="R5RS Skill/Skill++ form">defun</a> <span class="signature">TcfAddTermLine</span> (cvId LPP @key (lineCD 0.5 ) (Direction "H") (offSetX 0) (offSetY 0) (PLPP nil))
  "Adds a termination line, similar to a termination ring"
  (let (outputshapes sizex sizey cutsizex cutsizey newshapes bboxrect)
 (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (equal Direction "H")
  (progn
 (setq sizex (difference (TcfGetXdim cvId) (times 2 offSetX)))
 (setq cutsizex (TcfGetXdim cvId))
 (setq sizey lineCD)
 (setq cutsizey (plus lineCD (times 2 offSetY)))
  )
   (progn
  (setq sizey (difference (TcfGetGetYdim cvId) (times 2 offSetY)))
  (setq cutsizey (TcfGetGetYdim cvId))
  (setq sizex lineCD)
  (setq cutsizex (plus lineCD (times 2 offSetX)))
  )
  )
 (mapcar `dbDeleteObject (setofs shapes cvId~>shapes (equal shapes~>lpp (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "grow" (TcfGetDefaultLPPDebugPurpose ?cvId cvId)))))
 (mapcar `dbDeleteObject (setofs shapes cvId~>shapes (equal shapes~>lpp (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "grow1" (TcfGetDefaultLPPDebugPurpose ?cvId cvId)))))
 (setq bboxrect (dbCreateRect cvId (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "grow1" (TcfGetDefaultLPPDebugPurpose ?cvId cvId)) cvId~>bBox))
 (rodNameObject ?name "refAlignHand" ?shapeId bboxrect ?permitRename t)
 (TccRodCreateRect ?cvId cvId
 ?name (strcat "firstline" (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX321" title="R5RS Skill/Skill++ form">car</a> LPP))
 ?layer LPP
 ?width sizex
 ?length sizey
 ?refObj "refAlignHand"
 ?refHandle "lL"
 ?alignHandle "lL"
 ?xSep offSetX
 ?ySep offSetY
  )
 (TccRodCreateRect ?cvId cvId
 ?name (strcat "secondline" (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX321" title="R5RS Skill/Skill++ form">car</a> LPP))
 ?layer LPP
 ?width sizex
 ?length sizey
 ?refObj "refAlignHand"
 ?refHandle "uR"
 ?alignHandle "uR"
 ?xSep -offSetX
 ?ySep -offSetY
  )
 (TccRodCreateRect ?cvId cvId
 ?name (strcat "firstcut" (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX321" title="R5RS Skill/Skill++ form">car</a> LPP))
 ?layer (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "grow" (TcfGetDefaultLPPDebugPurpose ?cvId cvId))
 ?width cutsizex
 ?length cutsizey
 ?refObj "refAlignHand"
 ?refHandle "lL"
 ?alignHandle "lL"
  )
 (TccRodCreateRect ?cvId cvId
 ?name (strcat "secondcut" (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX321" title="R5RS Skill/Skill++ form">car</a> LPP))
 ?layer (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "grow" (TcfGetDefaultLPPDebugPurpose ?cvId cvId))
 ?width cutsizex
 ?length cutsizey
 ?refObj "refAlignHand"
 ?refHandle "uR"
 ?alignHandle "uR"
  )
 (dbDeleteObject bboxrect)
 (when PLPP
   (setq newshapes (dbLayerAndNot cvId  (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "grow1" (TcfGetDefaultLPPDebugPurpose ?cvId cvId)) (setofs shapes cvId~>shapes (equal shapes~>lpp PLPP)) (setofs shapes cvId~>shapes (equal shapes~>lpp (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "grow" (TcfGetDefaultLPPDebugPurpose ?cvId cvId)))) 199))
   (mapcar `dbDeleteObject (setofs shapes cvId~>shapes (equal shapes~>lpp PLPP)))
  )

 (mapcar `dbDeleteObject (setofs shapes cvId~>shapes (equal shapes~>lpp (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "grow" (TcfGetDefaultLPPDebugPurpose ?cvId cvId)))))
 (mapcar `dbDeleteObject (setofs shapes cvId~>shapes (equal shapes~>lpp (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "grow1" (TcfGetDefaultLPPDebugPurpose ?cvId cvId)))))

  (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> (rodGetObj "firstline" cvId)~>dbId (rodGetObj "secondline" cvId)~>dbId)

  )) 
<a name="TcfCreatePlugShape"></a><a name="TcfCreatePlugShape"></a><span><a href="../layout2func.html#TcfCreatePlugShape"><img src="./images/small-prev.gif" title="Skill/Skill++Doc Manual entry" alt="" border="0" /></a> <br /></span>(<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_7.html#IDX173" title="R5RS Skill/Skill++ form">defun</a> <span class="signature">TcfCreatePlugShape</span> (@key (cvId nil)
  (inputids nil)
  (pluglpp (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "metal0" (TcfGetDefaultLPPPurpose)))
  (plugbBox (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> 0 0) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> 1 1)))
  (SpacerSizeX 0.024)
  (SpacerSizeY 0.024)
  (createSlottedPlug nil)
  (SlotDir "V")
  (SlotCD 0.01)
  (MinSlotL 0.01)
  (MinPlugCD 0.02)
  (MaxPlugCD 0.1))
  "Creates the plug from a given set of shapes and a bounding box."
  (let (outputshapes sizedshapes plugextent spaceids tempids tempids2 tempids3 downbbox inputsizingX inputsizingY spl spw sizx sizy minsizx minsizy xor1TccDebug xor3TccDebug xor4TccDebug xor5TccDebug xor6TccDebug)
 (setq plugextent (dbCreateRect cvId (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "step1" (TcfGetDefaultLPPDebugPurpose ?cvId cvId)) plugbBox))
 (setq inputsizingX (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX258" title="R5RS Skill/Skill++ form">quotient</a> SpacerSizeX 2))
 (setq inputsizingY (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX258" title="R5RS Skill/Skill++ form">quotient</a> SpacerSizeY 2))
 (setq xor1TccDebug (dbLayerOr cvId (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "xor1" (TcfGetDefaultLPPDebugPurpose ?cvId cvId)) inputids nil)) (setq sizedshapes (TcfLayerSize cvId (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "step2" (TcfGetDefaultLPPDebugPurpose ?cvId cvId)) xor1TccDebug inputsizingX inputsizingY))
 (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (equal createSlottedPlug nil)
  (progn
 (setq xor3TccDebug (dbLayerAndNot cvId (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "xor3" (TcfGetDefaultLPPDebugPurpose ?cvId cvId)) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> plugextent) sizedshapes))
 (setq xor4TccDebug (dbLayerSize cvId (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "xor4" (TcfGetDefaultLPPDebugPurpose ?cvId cvId)) xor3TccDebug inputsizingX ))
 (setq xor5TccDebug (dbLayerOr cvId (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "xor5" (TcfGetDefaultLPPDebugPurpose ?cvId cvId)) xor4TccDebug nil))
 (setq xor6TccDebug (dbLayerSize cvId (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "xor6" (TcfGetDefaultLPPDebugPurpose ?cvId cvId)) xor5TccDebug -inputsizingX ))
 (setq outputshapes (dbLayerOr cvId pluglpp xor6TccDebug nil))
  ) (progn
  (setq tempids2 (TcfLayerSize cvId (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "step3" (TcfGetDefaultLPPDebugPurpose ?cvId cvId)) sizedshapes MinPlugCD MinPlugCD))
  (setq tempids (TcfLayerSize cvId (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "step4" (TcfGetDefaultLPPDebugPurpose ?cvId cvId)) tempids2  (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX258" title="R5RS Skill/Skill++ form">quotient</a> MaxPlugCD 2) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX258" title="R5RS Skill/Skill++ form">quotient</a> MaxPlugCD 2)))
  (setq tempids2 (dbLayerAndNot cvId (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "step5" (TcfGetDefaultLPPDebugPurpose ?cvId cvId)) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> plugextent) tempids 4000))
  (setq tempids (TcfLayerSize cvId (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "step6" (TcfGetDefaultLPPDebugPurpose ?cvId cvId)) tempids2  (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX258" title="R5RS Skill/Skill++ form">quotient</a> MaxPlugCD 2) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX258" title="R5RS Skill/Skill++ form">quotient</a> MaxPlugCD 2)))
  (setq downbbox (TcfLayerSize cvId (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "step7" (TcfGetDefaultLPPDebugPurpose ?cvId cvId)) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> plugextent) -MinPlugCD -MinPlugCD))
  (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (equal SlotDir "V")
   (progn
  (setq spl (difference (difference (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX325" title="R5RS Skill/Skill++ form">cadadr</a> plugbBox) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX325" title="R5RS Skill/Skill++ form">cadar</a> plugbBox)) (times 2 MinPlugCD)))
  (setq spw SlotCD)
  )
 (progn
   (setq spl SlotCD)
   (setq spw (difference (difference (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX325" title="R5RS Skill/Skill++ form">caadr</a> plugbBox) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX325" title="R5RS Skill/Skill++ form">caar</a> plugbBox)) (times 2 MinPlugCD)))
  )
  )
  (setq spaceids (rodFillBBoxWithRects  ?cvId cvId
 ?layer (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "step9" (TcfGetDefaultLPPDebugPurpose ?cvId cvId))
 ?fillBBox (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX321" title="R5RS Skill/Skill++ form">car</a> downbbox~>bBox)
 ?width spw
 ?length spl
 ?gap "minimum"
 ?spaceX MinPlugCD
 ?spaceY MinPlugCD
  ))
 (setq tempids2 (dbLayerAnd cvId (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "grow" (TcfGetDefaultLPPDebugPurpose ?cvId cvId)) spaceids tempids 4))
  (setq tempids (dbLayerAndNot cvId (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "grow1" (TcfGetDefaultLPPDebugPurpose ?cvId cvId)) spaceids tempids2 4))
  (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (equal SlotDir "V")
   (progn
  (setq sizx SlotCD)
  (setq sizy 0)
  (setq minsizx SlotCD)
  (setq minsizy MinSlotL)
  )
 (progn
   (setq sizx 0)
   (setq sizy SlotCD)
   (setq minsizx MinSlotL)
   (setq minsizy SlotCD)
  )
  )
  (setq tempids (TcfLayerSize cvId (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "grow2" (TcfGetDefaultLPPDebugPurpose ?cvId cvId)) tempids sizx sizy))
  (setq tempids3 (dbLayerAndNot cvId (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "grow3" (TcfGetDefaultLPPDebugPurpose ?cvId cvId)) tempids2 tempids 4))
  (foreachs x tempids3 (when (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX118" title="R5RS Skill/Skill++ form">or</a> (TccLessp (TcfGetGetXdim x) minsizx) (TccLessp (TcfGetGetYdim x) minsizy)) (dbDeleteObject x)))
  (setq tempids (dbLayerOr cvId (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "grow4" (TcfGetDefaultLPPDebugPurpose ?cvId cvId)) tempids3 sizedshapes 4))
  (setq outputshapes (dbLayerAndNot cvId pluglpp (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> plugextent) tempids 199))

  )
  )

  (TccFlattenList (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> outputshapes))
  ))
</pre></font><div>&nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p></div></body></html>