<html><head><link href="stylesheets/program.css" rel="stylesheet" title="program" type="text/css" /> <title>Source file</title></head><body bgcolor="#ffffff" text="#000000" link="#000000" vlink="#000000"><font family="Monospace"><pre><a name="TcfFRTCreatePathFunc"></a><a name="TcfFRTCreatePathFunc"></a><span><a href="../routingfunc.html#TcfFRTCreatePathFunc"><img src="./images/small-prev.gif" title="Skill/Skill++Doc Manual entry" alt="" border="0" /></a> <br /></span>(<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_7.html#IDX173" title="R5RS Skill/Skill++ form">defun</a> <span class="signature">TcfFRTCreatePathFunc</span> (obj )
  (let (pointLayer pathColorField pathColorFieldAdj clearPaths clearPathsByColor lstMetals generateRoutes generateSynthRoutes BusXdim BusYdim clearRoutes)
 (setq lstMetals
 (mapcar (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX98" title="R5RS Skill/Skill++ form">lambda</a> (<span class="local-name-binding">x</span>) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX321" title="R5RS Skill/Skill++ form">car</a> x))
   (setofs layers (leGetValidLayerList (techGetTechFile (ddGetObj (TccLib "tech")))) (equal (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX325" title="R5RS Skill/Skill++ form">cadr</a> layers) (TcfGetDefaultLPPRoutingPurpose)))
  )) 
 (setq pathColorField
 (hiCreateCyclicField
  ?name 'pathColorField
  ?prompt "Base routing layer:"
  ?choices lstMetals
  ?defValue "metal0"))

 (setq pathColorFieldAdj
 (hiCreateCyclicField
  ?name 'pathColorFieldAdj
  ?prompt "Adjacent routing layer:"
  ?choices (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "above" "below")
  ?defValue "above"))

 (setq BusXdim
 (hiCreateStringField
  ?prompt "Number of horizontal lines"
  ?name 'BusYdim
  ?defValue "10"))

 (setq BusYdim
 (hiCreateStringField
  ?prompt "Number of vertical lines"
  ?name 'BusXdim
  ?defValue "10"))

 (setq pointLayer
 (hiCreateStringField
  ?name 'finalpath
  ?prompt "Path descriptor string:"
  ?value ""
  ?defValue ""
  ?editable nil))

 (setq clearPaths
 (hiCreateButton
  ?name 'clearPaths
  ?buttonText "Clear all paths for all layers"
  ?callback "{ (TcfFRTClearPaths createPathForm) }"))

 (setq clearPathsByColor
 (hiCreateButton
  ?name 'clearPathsByColor
  ?buttonText "Clear paths for an specific layer"
  ?callback "{ (TcfFRTClearPathsByColor createPathForm) }"))

 (setq generateSynthRoutes
 (hiCreateButton
  ?name 'generateSynthRoutes
  ?buttonText "Generate synthesis shapes for routing"
  ?callback "{ (TcfFRTDrawSynthRoutes createPathForm) }"))

 (setq generateRoutes
 (hiCreateButton
  ?name 'generateRoutes
  ?buttonText "Synthesize routing busses (matching filler cells)"
  ?callback "{ (TcfFRTDrawRoutes createPathForm) }"))

 (setq clearRoutes
 (hiCreateButton
  ?name 'clearRoutes
  ?buttonText "Delete all routing busses (restarts)"
  ?callback "{ (TcfFRTClearRoutes createPathForm) }"))

 (setq createPathForm
 (hiCreateAppForm
  ?name 'createPathForm
  ?formTitle  "Manual router (pin-to-pad, pin-to-pin)"
  ?buttonLayout  'ApplyCancelDef
  ?callback   (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "(TccChoosePointsPath createPathForm)" "(clearAllEnterFunctions) (setq createPathForm nil)")
  ?fields  (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> pathColorField
  pathColorFieldAdj
  BusXdim
  BusYdim
  pointLayer
  clearPathsByColor
  clearPaths
  generateSynthRoutes
  generateRoutes
  clearRoutes)))

 createPathForm->cvId <a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX235" title="R5RS Skill/Skill++ form">=</a> (geGetEditCellView)
 createPathForm->PathList <a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX235" title="R5RS Skill/Skill++ form">=</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> nil)
 (hiDisplayForm createPathForm)
 t
  )) 
<a name="TcfFRTClearRoutes"></a><a name="TcfFRTClearRoutes"></a><span><a href="../routingfunc.html#TcfFRTClearRoutes"><img src="./images/small-prev.gif" title="Skill/Skill++Doc Manual entry" alt="" border="0" /></a> <br /></span>(<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_7.html#IDX173" title="R5RS Skill/Skill++ form">defun</a> <span class="signature">TcfFRTClearRoutes</span> (form)
  (let (obj )
 (foreach B form~>lstBuses
 (<a class="applied-name" href="routingfunc-1.html#TcfDeleteSynthShapes" title="routingfunc">TcfDeleteSynthShapes</a> B)
 (<a class="applied-name" href="routingfunc-1.html#TcfDeleteBusShapes" title="routingfunc">TcfDeleteBusShapes</a> B)
  ) 
 form~>lstBuses <a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX235" title="R5RS Skill/Skill++ form">=</a> nil
 t
  )) 
<a name="TcfFRTClearPathsByColor"></a><a name="TcfFRTClearPathsByColor"></a><span><a href="../routingfunc.html#TcfFRTClearPathsByColor"><img src="./images/small-prev.gif" title="Skill/Skill++Doc Manual entry" alt="" border="0" /></a> <br /></span>(<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_7.html#IDX173" title="R5RS Skill/Skill++ form">defun</a> <span class="signature">TcfFRTClearPathsByColor</span> (form)
  (let ( (lstNets (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> nil)) )
 (TccInfo "TcfFRTClearPathsByColor" (sprintf nil "Clearing displayed paths for color = %s" form->pathColorField->value))
 (foreachs elem form->PathList
  (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (equal (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX321" title="R5RS Skill/Skill++ form">car</a> elem)~>objType "path")
   (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (equal (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX321" title="R5RS Skill/Skill++ form">car</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX321" title="R5RS Skill/Skill++ form">car</a> elem)~>lpp) form->pathColorField->value)
 (dbDeleteObject (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX321" title="R5RS Skill/Skill++ form">car</a> elem))
  (setq lstNets (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX320" title="R5RS Skill/Skill++ form">cons</a> elem lstNets))
  )) ) form->PathList <a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX235" title="R5RS Skill/Skill++ form">=</a> lstNets
  )) 
<a name="TcfFRTClearPaths"></a><a name="TcfFRTClearPaths"></a><span><a href="../routingfunc.html#TcfFRTClearPaths"><img src="./images/small-prev.gif" title="Skill/Skill++Doc Manual entry" alt="" border="0" /></a> <br /></span>(<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_7.html#IDX173" title="R5RS Skill/Skill++ form">defun</a> <span class="signature">TcfFRTClearPaths</span> (form)
  (let (obj )
 (TccInfo "TcfFRTClearPaths" "Clearing ALL displayed paths")
 (foreachs elem form->PathList
  (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (equal (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX321" title="R5RS Skill/Skill++ form">car</a> elem)~>objType "path")
   (dbDeleteObject (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX321" title="R5RS Skill/Skill++ form">car</a> elem))
  )) form->PathList <a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX235" title="R5RS Skill/Skill++ form">=</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> nil)
 t
  )) 
<a name="TccChoosePointsPath"></a><a name="TccChoosePointsPath"></a><span><a href="../routingfunc.html#TccChoosePointsPath"><img src="./images/small-prev.gif" title="Skill/Skill++Doc Manual entry" alt="" border="0" /></a> <br /></span>(<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_7.html#IDX173" title="R5RS Skill/Skill++ form">defun</a> <span class="signature">TccChoosePointsPath</span> (form)
  (let (obj )
 (enterLine
  ?prompts (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "Click first point of the path (ENTER when DONE, ESC to QUIT)"
  "Click next point of the path (ENTER when DONE, ESC to QUIT)")
  ?form form
  ?doneProc  "TctCreatePath"
  ?alwaysMap  t)
 t
  )) <a name="TctCreatePath"></a>
<a name="TctCreatePath"></a><span><a href="../routingfunc.html#TctCreatePath"><img src="./images/small-prev.gif" title="Skill/Skill++Doc Manual entry" alt="" border="0" /></a> <br /></span>(<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_7.html#IDX173" title="R5RS Skill/Skill++ form">defun</a> <span class="signature">TctCreatePath</span> (win done Coords)
  (prog
   (pathId
 cv
 pathLPP
 points
 PathDescriptor
 pathColor)

   (unless done (return)) <span class="comment">; so we don't try to draw a bus for &lt;ESC&gt; or Cancel</span><br />   (setq cv (geGetEditCellView))
   (foreachs crd (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX335" title="R5RS Skill/Skill++ form">reverse</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX322" title="R5RS Skill/Skill++ form">cdr</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX335" title="R5RS Skill/Skill++ form">reverse</a> Coords)))
 (setq points (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX334" title="R5RS Skill/Skill++ form">append</a>
   points
   (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> (geWindowToEditPoint win crd))))
  ) 
   (setq PathDescriptor (<a class="applied-name" href="routingfunc-1.html#TcfPointsToPathString" title="routingfunc">TcfPointsToPathString</a> points))
   (setq pathColor createPathForm->pathColorField->value)
   (setq pathLPP (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> pathColor (TcfGetDefaultLPPRoutingPurpose)))
   (TccInfo "TctCreatePath" (sprintf nil "Path Color: %L; Final calculated path descriptor = %L" pathLPP PathDescriptor))

   (setq pathId (dbCreatePath createPathForm->cvId pathLPP points (times 10 (TccGetGrid))))
   createPathForm->PathList <a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX235" title="R5RS Skill/Skill++ form">=</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX320" title="R5RS Skill/Skill++ form">cons</a>
 (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a>
  pathId
  createPathForm->pathColorField->value
  createPathForm->pathColorFieldAdj->value
  createPathForm->BusXdim->value
  createPathForm->BusYdim->value
  PathDescriptor)
 createPathForm->PathList)
   createPathForm->finalpath->value <a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX235" title="R5RS Skill/Skill++ form">=</a> PathDescriptor

   (cancelEnterFun createPathForm)
   (return)
  )) 
<a name="TcfFRTDrawRoutes"></a><a name="TcfFRTDrawRoutes"></a><span><a href="../routingfunc.html#TcfFRTDrawRoutes"><img src="./images/small-prev.gif" title="Skill/Skill++Doc Manual entry" alt="" border="0" /></a> <br /></span>(<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_7.html#IDX173" title="R5RS Skill/Skill++ form">defun</a> <span class="signature">TcfFRTDrawRoutes</span> (form)
  (let (obj )
 (foreachs B form->lstBuses
  (<a class="applied-name" href="routingfunc-1.html#TcfCreateBusShapes" title="routingfunc">TcfCreateBusShapes</a> B)
  ) t
  )) 
<a name="TcfFRTDrawSynthRoutes"></a><a name="TcfFRTDrawSynthRoutes"></a><span><a href="../routingfunc.html#TcfFRTDrawSynthRoutes"><img src="./images/small-prev.gif" title="Skill/Skill++Doc Manual entry" alt="" border="0" /></a> <br /></span>(<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_7.html#IDX173" title="R5RS Skill/Skill++ form">defun</a> <span class="signature">TcfFRTDrawSynthRoutes</span> (form)
  (let (shape Bus lstBuses)
 (foreachs elem form~>PathList
  (setq shape (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX321" title="R5RS Skill/Skill++ form">car</a> elem))
  (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (equal shape~>objType "path")
   (progn
  (setq Bus (makeInstance
 'TcfBus
 ?cvId form->cvId
 ?isPGDVertical t
 ?lstPoints shape~>points
 ?pathDescriptor (nth 5 elem)
 ?ogdLayer (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (TcfGetIsPGD form->pathColorField->value)
   (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (equal form->pathColorFieldAdj->value "above")
 (TcfGetAdjacentLayers (TcfGetAdjacentLayers form->pathColorField->value)->top)->top
 (TcfGetAdjacentLayers (TcfGetAdjacentLayers form->pathColorField->value)->bot)->bot
  ) form->pathColorField->value
  ) ?pgdLayer (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (TcfGetIsPGD form->pathColorField->value)
   form->pathColorField->value
 (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (equal form->pathColorFieldAdj->value "above")
  (TcfGetAdjacentLayers (TcfGetAdjacentLayers form->pathColorField->value)->top)->top
  (TcfGetAdjacentLayers (TcfGetAdjacentLayers form->pathColorField->value)->bot)->bot
  )) ?numHorizLines (atoi (nth 4 elem))
 ?numVertLines (atoi (nth 3 elem))))

  (setq lstBuses (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX320" title="R5RS Skill/Skill++ form">cons</a> Bus lstBuses))
  (<a class="applied-name" href="routingfunc-1.html#TcfCreateSynthShapes" title="routingfunc">TcfCreateSynthShapes</a> Bus)
  )) ) 
  form->lstBuses <a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX235" title="R5RS Skill/Skill++ form">=</a> lstBuses
 t
  )) 
<a name="TcfBus"></a><a name="TcfBus"></a><span><a href="../routingfunc.html#TcfBus"><img src="./images/small-prev.gif" title="Skill/Skill++Doc Manual entry" alt="" border="0" /></a> <br /></span>(<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_7.html#IDX173" title="R5RS Skill/Skill++ form">defun</a> <span class="signature">TcfBus</span> (obj )
  (let* ((obj obj) 
   (cvId  cvId)
   (isPGDVertical  isPGDVertical)
   (lstPoints  lstPoints)
   (pathDescriptor  pathDescriptor)

   (pgdLayer  pgdLayer)
   (ogdLayer  ogdLayer)
   (numHorizLines  numHorizLines)
   (numVertLines  numVertLines)

   (lstSynthShapes  nil)
   (lstKeepGenAwayShapes  nil)
   (lstBusShapes  nil)
   (lstViaShapes  nil)

  ))) 
<a name="TcfDeleteSynthShapes"></a><a name="TcfDeleteSynthShapes"></a><span><a href="../routingfunc.html#TcfDeleteSynthShapes"><img src="./images/small-prev.gif" title="Skill/Skill++Doc Manual entry" alt="" border="0" /></a> <br /></span>(<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_7.html#IDX173" title="R5RS Skill/Skill++ form">defun</a> <span class="signature">TcfDeleteSynthShapes</span> ((B <a class="applied-name" href="routingfunc-1.html#TcfBus" title="routingfunc">TcfBus</a>))
  (let (obj )
 (foreachs shape B~>lstSynthShapes
  (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (dbIsId shape)
   (dbDeleteObject shape)
  )) B~>lstSynthShapes <a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX235" title="R5RS Skill/Skill++ form">=</a> nil
 t
  )) 
<a name="TcfDeleteBusShapes"></a><a name="TcfDeleteBusShapes"></a><span><a href="../routingfunc.html#TcfDeleteBusShapes"><img src="./images/small-prev.gif" title="Skill/Skill++Doc Manual entry" alt="" border="0" /></a> <br /></span>(<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_7.html#IDX173" title="R5RS Skill/Skill++ form">defun</a> <span class="signature">TcfDeleteBusShapes</span> ((B <a class="applied-name" href="routingfunc-1.html#TcfBus" title="routingfunc">TcfBus</a>))
  (let (obj )

  (foreachs elem B~>lstBusShapes
  (foreachs shape elem
   (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (dbIsId shape)
 (dbDeleteObject shape)
  )) ) B~>lstBusShapes <a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX235" title="R5RS Skill/Skill++ form">=</a> nil
  (foreachs elem B~>lstViaShapes
  (foreachs shape elem
   (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (dbIsId shape)
 (dbDeleteObject shape)
  )) ) B~>lstViaShapes <a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX235" title="R5RS Skill/Skill++ form">=</a> nil
  (foreachs shape B~>lstKeepGenAwayShapes
  (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (dbIsId shape)
   (dbDeleteObject shape)
  )) t
  )) 
<a name="TcfCreateSynthShapes"></a><a name="TcfCreateSynthShapes"></a><span><a href="../routingfunc.html#TcfCreateSynthShapes"><img src="./images/small-prev.gif" title="Skill/Skill++Doc Manual entry" alt="" border="0" /></a> <br /></span>(<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_7.html#IDX173" title="R5RS Skill/Skill++ form">defun</a> <span class="signature">TcfCreateSynthShapes</span> ((B <a class="applied-name" href="routingfunc-1.html#TcfBus" title="routingfunc">TcfBus</a>))
  (let (offset offsetNum (index 0) offsets numFillerX numFillerY bBox fillerDimX fillerDimY routeSynthShape extra NPoints)

 (setq offsets (parseString B~>pathDescriptor))
 (setq numFillerY (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX266" title="R5RS Skill/Skill++ form">ceiling</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX258" title="R5RS Skill/Skill++ form">quotient</a> B~>numHorizLines (times 1.0 (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX333" title="R5RS Skill/Skill++ form">length</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX325" title="R5RS Skill/Skill++ form">cadr</a> (TcfGetFillerCellInfo B~>ogdLayer)))))))
 (setq numFillerX (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX266" title="R5RS Skill/Skill++ form">ceiling</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX258" title="R5RS Skill/Skill++ form">quotient</a> B~>numVertLines (times 1.0 (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX333" title="R5RS Skill/Skill++ form">length</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX325" title="R5RS Skill/Skill++ form">cadr</a> (TcfGetFillerCellInfo B~>pgdLayer)))))))
 (setq fillerDimY (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX325" title="R5RS Skill/Skill++ form">cadr</a> (TcfGetFillerCellDimensions B~>ogdLayer)))
 (setq fillerDimX (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX321" title="R5RS Skill/Skill++ form">car</a> (TcfGetFillerCellDimensions B~>pgdLayer)))
 (setq NPoints (sub1 (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX333" title="R5RS Skill/Skill++ form">length</a> B~>lstPoints)))

 (foreachs point (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX335" title="R5RS Skill/Skill++ form">reverse</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX322" title="R5RS Skill/Skill++ form">cdr</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX335" title="R5RS Skill/Skill++ form">reverse</a> B~>lstPoints))) (setq offset (nth index offsets))
  (setq offsetNum (atof (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX391" title="R5RS Skill/Skill++ form">substring</a> offset 2 (strlen offset))))
 (setq extra (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX340" title="R5RS Skill/Skill++ form">member</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX391" title="R5RS Skill/Skill++ form">substring</a> offset 1 1) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "N" "S"))
   (times (TccPutOnGrid (times 1.1 (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX258" title="R5RS Skill/Skill++ form">quotient</a> numFillerY 2))) fillerDimY)
 (times (TccPutOnGrid (times 1.1 (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX258" title="R5RS Skill/Skill++ form">quotient</a> numFillerX 2))) fillerDimX)))
 (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (nequal index (sub1 NPoints))
   (setq offsetNum (plus offsetNum extra))
  ) (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (equal index 0)
   (setq extra 0.0)) 
  (TccInfo "TcfCreateSynthShapes" (sprintf nil "Extra pullback = %L, Extra extension = %L, offset = %L" extra offsetNum offset))
  (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX115" title="R5RS Skill/Skill++ form">case</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX391" title="R5RS Skill/Skill++ form">substring</a> offset 1 1)
 ("N"
  (setq bBox
  (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> (rodSubPoints point (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> (times (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX258" title="R5RS Skill/Skill++ form">quotient</a> numFillerX 2) fillerDimX) extra))
  (rodAddPoints point (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> (times (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX258" title="R5RS Skill/Skill++ form">quotient</a> numFillerX 2) fillerDimX) offsetNum))))) ("S"
  (setq bBox
  (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> (rodSubPoints point (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> (times (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX258" title="R5RS Skill/Skill++ form">quotient</a> numFillerX 2) fillerDimX) offsetNum))
  (rodAddPoints point (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> (times (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX258" title="R5RS Skill/Skill++ form">quotient</a> numFillerX 2) fillerDimX) extra))))) ("E"
  (setq bBox
  (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> (rodSubPoints point (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> extra (times (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX258" title="R5RS Skill/Skill++ form">quotient</a> numFillerY 2) fillerDimY)))
  (rodAddPoints point (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> offsetNum (times (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX258" title="R5RS Skill/Skill++ form">quotient</a> numFillerY 2) fillerDimY)))))) ("W"
  (setq bBox
  (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> (rodSubPoints point (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> offsetNum (times (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX258" title="R5RS Skill/Skill++ form">quotient</a> numFillerY 2) fillerDimY)))
  (rodAddPoints point (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> extra (times (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX258" title="R5RS Skill/Skill++ form">quotient</a> numFillerY 2) fillerDimY)))))) (t
  (TccWarn "TcfCreateSynthrectangles" "Invalid path descriptor string!")
  (error "Invalid path descriptor string!")) ) 
 (setq bBox (TcfSnapBBoxToCell
  bBox
  (TccLib "pad")
  (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX321" title="R5RS Skill/Skill++ form">car</a> (TcfGetLstFillerCells (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX340" title="R5RS Skill/Skill++ form">member</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX391" title="R5RS Skill/Skill++ form">substring</a> offset 1 1) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "N" "S")) B~>pgdLayer B~>ogdLayer)))
  "R0"
  0.0
  0.0
  ?grow t))
  (setq routeSynthShape (dbCreateRect B~>cvId (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX340" title="R5RS Skill/Skill++ form">member</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX391" title="R5RS Skill/Skill++ form">substring</a> offset 1 1) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "N" "S")) B~>pgdLayer B~>ogdLayer) (TcfGetDefaultLPPRoutingPurpose ?cvId B~>cvId)) bBox))

 B~>lstSynthShapes <a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX235" title="R5RS Skill/Skill++ form">=</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX320" title="R5RS Skill/Skill++ form">cons</a> routeSynthShape B~>lstSynthShapes)
  (setq index (add1 index))
  ) 
 B~>lstSynthShapes <a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX235" title="R5RS Skill/Skill++ form">=</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX335" title="R5RS Skill/Skill++ form">reverse</a> B~>lstSynthShapes)
 t
  )) 
<a name="TcfCreateBusShapes"></a><a name="TcfCreateBusShapes"></a><span><a href="../routingfunc.html#TcfCreateBusShapes"><img src="./images/small-prev.gif" title="Skill/Skill++Doc Manual entry" alt="" border="0" /></a> <br /></span>(<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_7.html#IDX173" title="R5RS Skill/Skill++ form">defun</a> <span class="signature">TcfCreateBusShapes</span> ((B <a class="applied-name" href="routingfunc-1.html#TcfBus" title="routingfunc">TcfBus</a>))
  (let (OffsetX OffsetY layer (index 0) pathString (backX 0.0) (backY 0.0) order eteSpacing)

 (setq pathString (parseString B~>pathDescriptor))
 (foreachs shape B~>lstSynthShapes
  (setq layer (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX321" title="R5RS Skill/Skill++ form">car</a> shape~>lpp))
 (setq OffsetX (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX321" title="R5RS Skill/Skill++ form">car</a> (nth 4 (TcfGetFillerCellInfo layer ?customLib (TcfXmlFind (TcfGetProjectName) "stacked_filler_sea" "Library") ?customCell (TcfXmlFind (TcfGetProjectName) "stacked_filler_sea" "CellName")))))
 (setq OffsetY (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX325" title="R5RS Skill/Skill++ form">cadr</a> (nth 4 (TcfGetFillerCellInfo layer ?customLib (TcfXmlFind (TcfGetProjectName) "stacked_filler_sea" "Library") ?customCell (TcfXmlFind (TcfGetProjectName) "stacked_filler_sea" "CellName")))))
 (setq eteSpacing (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX411" title="R5RS Skill/Skill++ form">apply</a> 'plus (nth 7 (TcfGetFillerCellInfo layer ?customLib (TcfXmlFind (TcfGetProjectName) "stacked_filler_sea" "Library") ?customCell (TcfXmlFind (TcfGetProjectName) "stacked_filler_sea" "CellName")))))


 (when (TcfGetIsPGD (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX321" title="R5RS Skill/Skill++ form">car</a> shape~>lpp))
   (setq order OffsetX)
   (setq OffsetX OffsetY)
   (setq OffsetY order)
  ) 
  (setq order (nth index pathString))
  (setq backX 0.0)
  (setq backY 0.0)
  
  (TccInfo "TcfCreateBusShapes" (sprintf nil "Drawing on layer = %L" (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX321" title="R5RS Skill/Skill++ form">car</a> shape~>lpp)))
  (TccInfo "TcfCreateBusShapes" (sprintf nil "Offset X = %L, Offset Y = %L" OffsetX OffsetY))
  (TccInfo "TcfCreateBusShapes" (sprintf nil "ETE distance in filler cell = %L" eteSpacing))
  (TccInfo "TcfCreateBusShapes" (sprintf nil "Order = %L" order))

  (when (equal index (sub1 (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX333" title="R5RS Skill/Skill++ form">length</a> B~>lstSynthShapes)))
   (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX115" title="R5RS Skill/Skill++ form">case</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX391" title="R5RS Skill/Skill++ form">substring</a> order 1 1)
   ("S"
 (setq backY (minus eteSpacing))) ("W"
 (setq backX (minus eteSpacing))) (t nil)) 
   (TccInfo "TcfCreateBusShapes" (sprintf nil "Extending last %L-th set of bus shapes, thus backX=%L, backY=%L" (add1 index) backX backY))
  ) B~>lstBusShapes <a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX235" title="R5RS Skill/Skill++ form">=</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX320" title="R5RS Skill/Skill++ form">cons</a> (TcfCreateArrayLineMultiLPP
   ?cv B~>cvId
   ?lpp (mapcar (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX98" title="R5RS Skill/Skill++ form">lambda</a> (<span class="local-name-binding">x</span>) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> x (TcfGetDefaultLPPPurpose ?cvId B~>cvId))) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX325" title="R5RS Skill/Skill++ form">cadr</a> (TcfGetFillerCellInfo (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX321" title="R5RS Skill/Skill++ form">car</a> shape~>lpp))))
   ?CDSpacePropList (nth 2 (TcfGetFillerCellInfo (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX321" title="R5RS Skill/Skill++ form">car</a> shape~>lpp)))
   ?segProp (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a>
 (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a>
  (difference (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (TcfGetIsPGD (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX321" title="R5RS Skill/Skill++ form">car</a> shape~>lpp))
   (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX325" title="R5RS Skill/Skill++ form">cadr</a> (trBBoxDims shape~>bBox))
 (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX321" title="R5RS Skill/Skill++ form">car</a> (trBBoxDims shape~>bBox)))
 (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (equal index (sub1 (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX333" title="R5RS Skill/Skill++ form">length</a> B~>lstSynthShapes)))
   0.0
 eteSpacing
  )) )) ?trimNumTracks nil
   ?numTracks (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (TcfGetIsPGD (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX321" title="R5RS Skill/Skill++ form">car</a> shape~>lpp))
   B~>numVertLines
 B~>numHorizLines)

   ?direction (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (TcfGetIsPGD (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX321" title="R5RS Skill/Skill++ form">car</a> shape~>lpp)) "V" "H")
   ?offsetX (plus (xCoord (lowerLeft shape~>bBox)) OffsetX backX)
   ?offsetY (plus (yCoord (lowerLeft shape~>bBox)) OffsetY backY)
   ?shapesOnly t

   ?offsetAlign "CD"

   ?fillBBox nil) B~>lstBusShapes) 
 B~>lstKeepGenAwayShapes <a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX235" title="R5RS Skill/Skill++ form">=</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX320" title="R5RS Skill/Skill++ form">cons</a>
  (dbCreateRect B~>cvId
 (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX321" title="R5RS Skill/Skill++ form">car</a> shape~>lpp) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX325" title="R5RS Skill/Skill++ form">cadr</a> (TcfGetDefaultLPPFillerKeepGenAwayPurpose ?cvId B~>cvId)))
 (trBBoxUnion (mapcar (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX98" title="R5RS Skill/Skill++ form">lambda</a> (<span class="local-name-binding">x</span>) (getSGq x bBox)) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX321" title="R5RS Skill/Skill++ form">car</a> B~>lstBusShapes))))
  B~>lstKeepGenAwayShapes)

 (when (TccGEQP index 1)
 (TccInfo "TcfCreateBusShapes" (sprintf nil "Generating vias for corner %L" index))
 B~>lstViaShapes <a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX235" title="R5RS Skill/Skill++ form">=</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX320" title="R5RS Skill/Skill++ form">cons</a>
  (TccLayerVia
   ?cvId B~>cvId
   ?purpose (TcfGetDefaultLPPPurpose ?cvId B~>cvId)
   ?pgdLines (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (TcfGetIsPGD (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX321" title="R5RS Skill/Skill++ form">car</a> shape~>lpp)) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX321" title="R5RS Skill/Skill++ form">car</a> B~>lstBusShapes) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX325" title="R5RS Skill/Skill++ form">cadr</a> B~>lstBusShapes))
   ?ogdLines (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (TcfGetIsPGD (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX321" title="R5RS Skill/Skill++ form">car</a> shape~>lpp)) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX325" title="R5RS Skill/Skill++ form">cadr</a> B~>lstBusShapes) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX321" title="R5RS Skill/Skill++ form">car</a> B~>lstBusShapes))
  ) B~>lstViaShapes)) 
  (setq index (add1 index))
  ) 
 (TccInfo "TcfCreateBusShapes" "Bus and via generation has finished.")
 B~>lstBusShapes <a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX235" title="R5RS Skill/Skill++ form">=</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX335" title="R5RS Skill/Skill++ form">reverse</a> B~>lstBusShapes)
 B~>lstViaShapes <a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX235" title="R5RS Skill/Skill++ form">=</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX335" title="R5RS Skill/Skill++ form">reverse</a> B~>lstViaShapes)
 t
  )) 
<a name="TcfPointsToPathString"></a><a name="TcfPointsToPathString"></a><span><a href="../routingfunc.html#TcfPointsToPathString"><img src="./images/small-prev.gif" title="Skill/Skill++Doc Manual entry" alt="" border="0" /></a> <br /></span>(<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_7.html#IDX173" title="R5RS Skill/Skill++ form">defun</a> <span class="signature">TcfPointsToPathString</span> (points)
  (let (prevpt
  pt
  xorig
  yorig
  xnew
  ynew
  order
  (PathDescriptor ""))

  (fors i 1 (sub1 (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX333" title="R5RS Skill/Skill++ form">length</a> points))
 (setq prevpt (nth (sub1 i) points))
 (setq pt (nth i points))

 (setq xorig (xCoord prevpt))
 (setq yorig (yCoord prevpt))

 (setq xnew (xCoord pt))
 (setq ynew (yCoord pt))

 (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX110" title="R5RS Skill/Skill++ form">cond</a>
 ((TccEQP ynew yorig)
   (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (TccGreaterp xnew xorig)
 (setq order (strcat "E" (sprintf nil
 "%L"
 (difference
  xnew
  xorig))))
  (setq order (strcat "W" (sprintf nil
  "%L"
  (difference
   xorig
   xnew))))
  )) 
 ((TccEQP xnew xorig)
   (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (TccGreaterp ynew yorig)
 (setq order
 (strcat "N" (sprintf nil
 "%L"
 (difference
  ynew
  yorig))))
  (setq order
  (strcat "S" (sprintf nil
  "%L"
  (difference
   yorig
   ynew))))
  )) ) 
 (setq PathDescriptor (strcat PathDescriptor order))

  (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (lessp i (difference (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX333" title="R5RS Skill/Skill++ form">length</a> points) 1))
  (setq
   PathDescriptor
   (strcat
 PathDescriptor
 " ")))
  ) 
 PathDescriptor
  )) <a name="TcfRedundantPathCleaner"></a>
<a name="TcfRedundantPathCleaner"></a><span><a href="../routingfunc.html#TcfRedundantPathCleaner"><img src="./images/small-prev.gif" title="Skill/Skill++Doc Manual entry" alt="" border="0" /></a> <br /></span>(<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_7.html#IDX173" title="R5RS Skill/Skill++ form">defun</a> <span class="signature">TcfRedundantPathCleaner</span> (listPath)
  (let (numPoints listPathp pt prevpt nextpt)

 (setq numPoints (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX333" title="R5RS Skill/Skill++ form">length</a> listPath))
 (setq listPathp (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX321" title="R5RS Skill/Skill++ form">car</a> listPath)))
 (fors i 1 (difference numPoints 2)
 (setq pt (nth i listPath))
 (setq prevpt (nth (sub1 i) listPath))
 (setq nextpt (nth (add1 i) listPath))

  (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX118" title="R5RS Skill/Skill++ form">or</a> (equal (xCoord prevpt) (xCoord nextpt))
   (equal (yCoord prevpt) (yCoord nextpt)))
  (progn (TccDebug "TcfFRT2" (sprintf nil "Removing redundant point=%L." pt))
   (TccDebug "TcfFRT2" (sprintf nil "Cleaned ListPath=%L" listPathp)))
   (progn
  (setq listPathp (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX334" title="R5RS Skill/Skill++ form">append</a> listPathp (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> pt))))
  )) (setq listPathp (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX334" title="R5RS Skill/Skill++ form">append</a> listPathp (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> (nth numPoints-1 listPath))))
 (TccDebug "TcfFRT2" (sprintf nil "Cleaned final ListPath=%L" listPath))
 listPathp
  )) <a name="TcfFillerSnap"></a>
<a name="TcfFillerSnap"></a><span><a href="../routingfunc.html#TcfFillerSnap"><img src="./images/small-prev.gif" title="Skill/Skill++Doc Manual entry" alt="" border="0" /></a> <br /></span>(<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_7.html#IDX173" title="R5RS Skill/Skill++ form">defun</a> <span class="signature">TcfFillerSnap</span> (Layer
 add1Layer
 sub1Layer
 pt
 isPGD
 index
 fillerdimensionx
 fillerdimensiony
 numTracks)
  (let (newpt xp yp lowerbound numfillers pinwidth ortowidth)
 (setq xp (xCoord pt))
 (setq yp (yCoord pt))
 (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (equal isPGD t)
  (progn
 (setq pinwidth (TccBusWidth numTracks Layer))
 (setq ortowidth (TccBusWidth numTracks sub1Layer))
  ) (progn
  (setq pinwidth (TccBusWidth numTracks Layer))
  (setq ortowidth (TccBusWidth numTracks add1Layer))
  )) 
 (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (equal isPGD t)
 (progn
 (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (oddp i)
  (progn
  (setq numfillers (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX258" title="R5RS Skill/Skill++ form">quotient</a> (TccPutOnGridCeiling ortowidth fillerdimensiony) fillerdimensiony))
 (setq lowerbound (TccPutOnGrid yp fillerdimensiony))
 (setq yp (plus lowerbound (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (oddp numfillers) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX258" title="R5RS Skill/Skill++ form">quotient</a> fillerdimensiony 2) fillerdimensiony)))
  ) (progn
 (setq numfillers (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX258" title="R5RS Skill/Skill++ form">quotient</a> (TccPutOnGridCeiling pinwidth fillerdimensionx) fillerdimensionx))
  (setq lowerbound (TccPutOnGrid xp fillerdimensionx))
  (setq xp (plus lowerbound (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (oddp numfillers) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX258" title="R5RS Skill/Skill++ form">quotient</a> fillerdimensionx 2) fillerdimensionx)))
  )) ) 
   (progn
  (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (oddp i)
   (progn
 (setq numfillers (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX258" title="R5RS Skill/Skill++ form">quotient</a> (TccPutOnGridCeiling ortowidth fillerdimensionx) fillerdimensionx))
  (setq lowerbound (TccPutOnGrid xp fillerdimensionx))
  (setq xp (plus lowerbound (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (oddp numfillers) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX258" title="R5RS Skill/Skill++ form">quotient</a> fillerdimensionx 2) fillerdimensionx)))
  ) (progn
   (setq numfillers (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX258" title="R5RS Skill/Skill++ form">quotient</a> (TccPutOnGridCeiling pinwidth fillerdimensiony) fillerdimensiony))
   (setq lowerbound (TccPutOnGrid yp fillerdimensiony))
   (setq yp (plus lowerbound (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (oddp numfillers) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX258" title="R5RS Skill/Skill++ form">quotient</a> fillerdimensiony 2) fillerdimensiony)))
  )) )) 
 (setq newpt (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> xp yp))
 newpt
  )) <a name="TcfNextPoint"></a>
<a name="TcfNextPoint"></a><span><a href="../routingfunc.html#TcfNextPoint"><img src="./images/small-prev.gif" title="Skill/Skill++Doc Manual entry" alt="" border="0" /></a> <br /></span>(<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_7.html#IDX173" title="R5RS Skill/Skill++ form">defun</a> <span class="signature">TcfNextPoint</span> (currentPoint direction offset)
  (let (temp)
 (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX110" title="R5RS Skill/Skill++ form">cond</a>
  ((equal (strcmp direction "W") 0)
   (setq temp (rodAddPoints currentPoint (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> (minus offset) 0.0))))
  ((equal (strcmp direction "N") 0)
   (setq temp (rodAddPoints currentPoint (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> 0.0 offset))))
  ((equal (strcmp direction "E") 0)
   (setq temp (rodAddPoints currentPoint (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> offset 0.0))))
  ((equal (strcmp direction "S") 0)
   (setq temp (rodAddPoints currentPoint (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> 0.0 (minus offset)))))
  (t (setq temp currentPoint))
  ) temp
  )) </pre></font><div>&nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p></div></body></html>