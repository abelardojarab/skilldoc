<html><head><link href="stylesheets/program.css" rel="stylesheet" title="program" type="text/css" /> <title>Source file</title></head><body bgcolor="#ffffff" text="#000000" link="#000000" vlink="#000000"><font family="Monospace"><pre>(procedure TcfFillerDataHandler(ipcId data)
  (let (result)
  (foreachs d (parseString data "
")
  (TccInfo "TcfFillerDataHandler" (sprintf nil "TcfFillerDataHandler received data %L" d))
  )) ) 
(procedure TcfFillerErrHandler(ipcId data)
  (TccWarn "TcfFillerErrHandler" (sprintf nil "ERROR: TcfFillerErrHandler called with: %L %L" ipcId data))
  ) 
(procedure TcfFillerFinishHandler(ipcId data)
  (let (exitStatus)
 (TccInfo "TcfFillerFinishHandler" (sprintf nil "Remote filler flow finished at %s: %L %L " (getCurrentTime) ipcId data))
 exitStatus <a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX235" title="R5RS Skill/Skill++ form">=</a> (ipcGetExitStatus ipcId)
 (TccInfo "TcfFillerFinishHandler" (sprintf nil "Remote filler flow returned %L value" exitStatus))
 (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (equal exitStatus 0)
  (TccInfo "TcfFillerFinishHandler" "*** Remote filler flow has succesfully finished. ***")
   (TccWarn "TcfFillerFinishHandler" "**ERROR: Remote filler flow failed, please review Cadence log file.**")
  )) ) 
<a name="TcfFillRemote"></a><a name="TcfFillRemote"></a><span><a href="../fillerfunctions.html#TcfFillRemote"><img src="./images/small-prev.gif" title="Skill/Skill++Doc Manual entry" alt="" border="0" /></a> <br /></span>(<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_7.html#IDX173" title="R5RS Skill/Skill++ form">defun</a> <span class="signature">TcfFillRemote</span> (lstFillerLayers inputLib inputCell OutputSuffix Orientation @key (placeFiller "no") (useNetBatch "yes") (finalCheckIn "no"))
  (let (fillIpc logFile skillFile envVariables initCadenceEnv logFileCDS skillFilePort cvId command timeString logFileNBQ)

 (setq timeString (buildString (parseString buildString(parseString(getCurrentTime(obj ) ":") "_")) "_"))
 (setq logFile (strcat "/tmp/" (getShellEnvVar "USER") "_" timeString ".log"))
 (setq logFileCDS (strcat "/tmp/" (getShellEnvVar "USER") "_" timeString ".cds.log"))
 (setq skillFile (strcat "/tmp/" (getShellEnvVar "USER") "_" timeString ".il"))

 (setq fillIpc (ipcBeginProcess "env | grep &#39;.*[A-Z].*&#39;"))
 (ipcWait fillIpc) (setq envVariables (parseString (ipcReadProcess fillIpc) "
"))
 (setq envVariables (mapcar (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX98" title="R5RS Skill/Skill++ form">lambda</a> (<span class="local-name-binding">x</span>) (parseString x "=")) envVariables))
 (setq envVariables (mapcar (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX98" title="R5RS Skill/Skill++ form">lambda</a> (<span class="local-name-binding">x</span>) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX321" title="R5RS Skill/Skill++ form">car</a> x) (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (stringp (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX325" title="R5RS Skill/Skill++ form">cadr</a> x)) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX325" title="R5RS Skill/Skill++ form">cadr</a> x) (sprintf nil "%L" (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX325" title="R5RS Skill/Skill++ form">cadr</a> x))))) envVariables))

 (setq initCadenceEnv (buildString (mapcar (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX98" title="R5RS Skill/Skill++ form">lambda</a> (<span class="local-name-binding">x</span>)
   (sprintf nil "setenv %s &#39;%s&#39;;" (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX321" title="R5RS Skill/Skill++ form">car</a> x) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX325" title="R5RS Skill/Skill++ form">cadr</a> x)))
 envVariables)))

 (setq skillFilePort (outfile skillFile))
 (fprintf skillFilePort (strcat "(setq cvId (dbOpenCellViewByType "
  "\"" inputLib "\" "
  "\"" inputCell "\" "
  "\"layout\"" " "
  "\"maskLayout\" \"r\"))
"
  "(TcfFill cvId" " "
  "?Orientation \"" Orientation "\" "
  "?lstFillerLayers \"" lstFillerLayers "\" "
  "?PlaceFiller " (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (equal placeFiller "yes") "t" "nil") " "
  "?OutputSuffix \"" OutputSuffix "\" "
  "?DSPostProcessing " (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (equal finalCheckIn "yes") "t" "nil")
  ")
"
  "(dbClose cvId)
"))
 (close skillFilePort)
 (setq command (strcat (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (equal useNetBatch "no")
   "xterm -e \\\""
 (strcat "nbq -P " (getShellEnvVar "NBPOOL")
   " -C " (getShellEnvVar "NBCLASS")
   " -S " (getShellEnvVar "NBQSLOT")
   " --parallel \\\"slots=2,slots_per_host=2\\\""
   " csh -c \\\"")
  ) initCadenceEnv
  "$CDS_INST_DIR/tools/dfII/bin/virtuoso -cdslib $CDSLIB -nograph -replay "
  skillFile
  " -log " logFileCDS ";\\\" "))
 (TccInfo "TcfFillRemote" "*** Launching remote filler flow ***" )

  (setq fillIpc (ipcBeginProcess command
  ""
  'TcfFillerDataHandler
  'TcfFillerErrHandler 'TcfFillerFinishHandler logFile))

 (TccInfo "TcfFillerRunAsyncScript" (sprintf nil "Cadence Log file is located at: %L" logFileCDS))
 logFileCDS

  )) 
<a name="TcfStackedFillerCellSplitter"></a><a name="TcfStackedFillerCellSplitter"></a><span><a href="../fillerfunctions.html#TcfStackedFillerCellSplitter"><img src="./images/small-prev.gif" title="Skill/Skill++Doc Manual entry" alt="" border="0" /></a> <br /></span>(<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_7.html#IDX173" title="R5RS Skill/Skill++ form">defun</a> <span class="signature">TcfStackedFillerCellSplitter</span> (obj )
  (let (cvId fillerCv fillBBox comPat2m comPat2v techId)

 (setq fillerCv (dbOpenCellViewByType (TcfXmlFind (upperCase (TcfGetProjectName)) "stacked_filler" "Library")
  (TcfXmlFind (upperCase (TcfGetProjectName)) "stacked_filler" "CellName") "layout" "maskLayout"))
 (setq fillBBox (TcfGetBoundingBox fillerCv))
 (setq comPat2m (pcreCompile "^metal[cs]*")) (setq comPat2v (pcreCompile "^via[a-z]*")) (setq techId (techGetTechFile fillerCv))

 (foreachs layer (TcfGetDefaultKeepGenAwayLayers) (when (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX117" title="R5RS Skill/Skill++ form">and</a>
   (stringp (TcfXmlFind (upperCase (TcfGetProjectName)) (strcat "filler_" (lowerCase layer)) "Library"))
   (stringp (TcfXmlFind (upperCase (TcfGetProjectName)) (strcat "filler_" (lowerCase layer)) "CellName")))
 (setq cvId (dbOpenCellViewByType
 (TcfXmlFind (upperCase (TcfGetProjectName)) (strcat "filler_" (lowerCase layer)) "Library")
 (TcfXmlFind (upperCase (TcfGetProjectName)) (strcat "filler_" (lowerCase layer)) "CellName")
 "layout" "maskLayout" "w")) 
 (dbCreateRect cvId (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "chkBoundary" "boundary") fillBBox)
 (dbCreateRect cvId (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> layer (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX325" title="R5RS Skill/Skill++ form">cadr</a> (TcfGetDefaultLPPFillerKeepGenAwayPurpose ?cvId cvId))) fillBBox)
 (dbCreateRect cvId (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> layer "fillerID") fillBBox)

 (setq lstInvolvedLayers
 (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a>
 (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> layer (TcfGetDefaultLPPPurpose ?cvId cvId))
 (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> (pcreReplace comPat2v layer "viaa" 0) (TcfGetDefaultLPPPurpose ?cvId cvId))
  (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> (pcreReplace comPat2v layer "viab" 0) (TcfGetDefaultLPPPurpose ?cvId cvId))
  (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> (pcreReplace comPat2v layer "viac" 0) (TcfGetDefaultLPPPurpose ?cvId cvId))

 (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> (pcreReplace comPat2m layer "metalc" 0) (TcfGetDefaultLPPPurpose ?cvId cvId))
  (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> (pcreReplace comPat2m layer "metals" 0) (TcfGetDefaultLPPPurpose ?cvId cvId))
  )) (setq lstInvolvedLayers (TcfRemoveLstDuplicateItems lstInvolvedLayers))
 (setq lstInvolvedLayers (setofs x lstInvolvedLayers (techGetLP techId x)))

  (TccInfo "TcfStackedFillerCellSplitter" (sprintf nil "Generating sliced filler cell for layer = %L, by copying %L" layer lstInvolvedLayers))
 (TcfGetTrueOverlaps fillerCv
   fillBBox
   nil
   (dbGetMaxHierDepth)
   ?userTempCV cvId
   ?returnCopies t
   ?lstLayers lstInvolvedLayers)
 (dbSave cvId)
 (dbClose cvId)
  )) 
 (dbClose fillerCv)
  )) <a name="TctFillerFlowForm"></a>
<a name="TctFillerFlowForm"></a><span><a href="../fillerfunctions.html#TctFillerFlowForm"><img src="./images/small-prev.gif" title="Skill/Skill++Doc Manual entry" alt="" border="0" /></a> <br /></span>(<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_7.html#IDX173" title="R5RS Skill/Skill++ form">defun</a> <span class="signature">TctFillerFlowForm</span> (obj )
  (let (cn ln orient fillerFlowForm diffCheckGrid fillerstyle lstLayers consistency maxDepth singlepass DSPostProcessing fillRemote useNetBatch)
 (setq cn (hiCreateStringField
  ?name 'cn
  ?prompt "Cell To Fill"
  ?defValue (geGetEditCellView)~>cellName
  ?editable t))
 (setq ln (hiCreateStringField
  ?name 'ln
  ?prompt "Lib To Fill"
  ?defValue (geGetEditCellView)~>libName
  ?editable t))
 (setq orient (hiCreateBooleanButton
   ?name 'orient
   ?buttonText "Filler poly is vertical"
   ?defValue (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX304" title="R5RS Skill/Skill++ form">not</a> (rexMatchp ".*FRAME.*" (getShellEnvVar "MODEL")))))
 (setq singlepass (hiCreateBooleanButton
 ?name 'singlepass
 ?buttonText "1-pass fill with stacked filler"
 ?defValue nil))
 (setq DSPostProcessing (hiCreateBooleanButton
 ?name 'DSPostProcessing
 ?buttonText "Check-in resulting cell"
 ?defValue t))
 (setq fillRemote (hiCreateBooleanButton
 ?name 'fillRemote
 ?buttonText "Remote launch (does not block CIW)"
 ?defValue t))
 (setq useNetBatch (hiCreateBooleanButton
  ?name 'useNetBatch
  ?buttonText "Run as Netbatch job (locally otherwise)"
  ?defValue nil))
 (setq fillerstyle
 (hiCreateCyclicField
  ?name 'fillerstyle
  ?prompt  "Filler flow mode"
  ?choices (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "TCE" "Frame")
  ?defValue   "Frame"))
 
 (setq lstLayers (hiCreateStringField
   ?name 'lstLayers
   ?prompt "List of layers for frame filler"
   ?defValue (buildString (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX335" title="R5RS Skill/Skill++ form">reverse</a> (TcfRemoveLstDuplicateItems (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX334" title="R5RS Skill/Skill++ form">append</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "POLYCHECK" "poly")
  (TcfGetDefaultKeepGenAwayLayers)))) " ")
   ?editable t))
 (setq fillerFlowForm (hiCreateAppForm
  ?name 'fillerFlowForm
  ?formTitle "Test Chip/Frame Filler Flow"
  ?callback "(TctFillerFlowFormCB fillerFlowForm)"
  ?fields (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> fillerstyle cn ln orient singlepass useNetBatch fillRemote DSPostProcessing lstLayers)
  ?unmapAfterCB nil))
 (hiDisplayForm fillerFlowForm)))

<a name="TctFillerFlowFormCB"></a><span></span>(<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_7.html#IDX173" title="R5RS Skill/Skill++ form">defun</a> <span class="signature">TctFillerFlowFormCB</span> (f)
  (let (cvId (cell f->cn->value)
 (lib f->ln->value)
 fillerCv)

  (setq cvId (dbOpenCellViewByType lib cell "layout" "maskLayout"))
  (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX115" title="R5RS Skill/Skill++ form">case</a> f->fillerstyle->value
   ("Frame"
 (when (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX340" title="R5RS Skill/Skill++ form">member</a> cvId~>mode (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "w" "a"))
   (dbSave cvId)
   (dbReopen cvId "r")) (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> f->fillRemote->value

  (progn (<a class="applied-name" href="fillerfunctions-1.html#TcfFillRemote" title="fillerfunctions">TcfFillRemote</a> f->lstLayers->value lib cell "" "R0" ?placeFiller "yes"
   ?useNetBatch (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> f->useNetBatch->value "yes" "no")
   ?finalCheckIn (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> f->DSPostProcessing->value "yes" "no"))
   (dbRefreshCellView cvId)) 
   (<a class="applied-name" href="fillerfunctions-1.html#TcfFill" title="fillerfunctions">TcfFill</a>
 cvId
 ?lstFillerLayers (parseString f->lstLayers->value " ")
 ?maxDepth (dbGetMaxHierDepth)
 ?singlepass f->singlepass->value
 ?placeFiller "yes"
 ?DSPostProcessing f->DSPostProcessing->value) 
  ) (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (nequal cvId (geGetEditCellView)) (dbClose cvId))
  ) 
   ("TCE"
 (when (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX340" title="R5RS Skill/Skill++ form">member</a> cvId~>mode (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "w" "a")) (equal f->fillerstyle->value "TCE")
 (dbSave cvId)
 (dbReopen cvId "r")
  ) (TccFill lib cell ?orient (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> f->orient->value "R0" "R270"))
  )) 
 t))

<a name="TcfDSGetCdbName"></a><span></span>(<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_7.html#IDX173" title="R5RS Skill/Skill++ form">defun</a> <span class="signature">TcfDSGetCdbName</span> (view)
  (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX110" title="R5RS Skill/Skill++ form">cond</a>
   ((equal view "layout") "layout.cdb")
   ((equal view "schematic") "sch.cdb")
   (t view)
  )) <a name="TcfUnmanagedP"></a>
<a name="TcfUnmanagedP"></a><span><a href="../fillerfunctions.html#TcfUnmanagedP"><img src="./images/small-prev.gif" title="Skill/Skill++Doc Manual entry" alt="" border="0" /></a> <br /></span>(<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_7.html#IDX173" title="R5RS Skill/Skill++ form">defun</a> <span class="signature">TcfUnmanagedP</span> (lib cell view)
  (<a class="applied-name" href="fillerfunctions-1.html#TcfDSStateP" title="fillerfunctions">TcfDSStateP</a> lib cell view "gdmStateNone")
  ) <a name="TcfDSStateP"></a>
<a name="TcfDSStateP"></a><span><a href="../fillerfunctions.html#TcfDSStateP"><img src="./images/small-prev.gif" title="Skill/Skill++Doc Manual entry" alt="" border="0" /></a> <br /></span>(<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_7.html#IDX173" title="R5RS Skill/Skill++ form">defun</a> <span class="signature">TcfDSStateP</span> (lib cell view state)
  (nindex
   (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX325" title="R5RS Skill/Skill++ form">caar</a>
 (gdmstatus
  (gdmCreateSpec lib cell view
  (<a class="applied-name" href="fillerfunctions-1.html#TcfDSGetCdbName" title="fillerfunctions">TcfDSGetCdbName</a> view)
  "LibraryUnix") 6)) state
  )) <a name="TcfCheckWriteLocks"></a>
<a name="TcfCheckWriteLocks"></a><span><a href="../fillerfunctions.html#TcfCheckWriteLocks"><img src="./images/small-prev.gif" title="Skill/Skill++Doc Manual entry" alt="" border="0" /></a> <br /></span>(<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_7.html#IDX173" title="R5RS Skill/Skill++ form">defun</a> <span class="signature">TcfCheckWriteLocks</span> (lib cell)
  (let (status cmd fn)
 (TccInfo "TcfCheckWriteLocks" (sprintf nil "running on %s %s." lib cell))
 (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (ddGetObj lib cell "layout")
  (progn
 (setq fn (strcat (getSGq (ddGetObj lib cell "layout") writePath) "/layout.oa.cdslck"))
 (when (isFile fn)
   (TccDebug "TcfCheckWriteLocks"
 (sprintf nil "Found lock file %s" fn))
   (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (isWritable fn)
 (progn
   (TccWarn "TcfCheckWriteLocks" (sprintf nil "Removing lock: %s" fn))
   (setq cmd (strcat "rm -rf " fn))
   (shell cmd)) (progn
 (TccWarn "TcfCheckWriteLocks" (sprintf nil "Write lock %s for design %s in library %s exists and belongs to another." fn lib cell))
 (TccWarn "TcfCheckWriteLocks" (sprintf nil "Cannot continue. Please contact the owner of %s for resolution." fn))
 (error "Cannot continue.")
  )) ) (when (isFile fn)
   (TccWarn "TcfCheckWriteLocks" (sprintf nil "Cannot continue. File lock %s was not removed. Please contact project&#39;s DA" fn))
   (error "Cannot continue.")
  )) ) t
  )) <a name="TcfSetTcfGen"></a>
<a name="TcfSetTcfGen"></a><span><a href="../fillerfunctions.html#TcfSetTcfGen"><img src="./images/small-prev.gif" title="Skill/Skill++Doc Manual entry" alt="" border="0" /></a> <br /></span>(<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_7.html#IDX173" title="R5RS Skill/Skill++ form">defun</a> <span class="signature">TcfSetTcfGen</span> (lib cell view)
  (let (cv)
 (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (ddGetObj lib cell view)
  (progn
 (setq cv (dbOpenCellViewByType lib cell view "maskLayout" "a"))
 (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (dbIsId cv)
  (progn
 (dbSetq cv "yes" createdByTcf)
 (TccInfo "TcfSetTcfGen" (sprintf nil "Successfully tagged cell %s %s %s." lib cell view))
 (dbSave cv)
 (dbClose cv)
 t) (progn
  (TccWarn "TcfSetTcfGen" (sprintf nil "Cell %s %s %s is not writable. Cannot tag it." lib cell view))
  nil
  )) ) (progn
  (TccWarn "TcfSetTcfGen" (sprintf nil "Cell %s %s %s does not exist." lib cell view)) nil
  )) )) <a name="TcfFillDSPostProcessing"></a>
<a name="TcfFillDSPostProcessing"></a><span><a href="../fillerfunctions.html#TcfFillDSPostProcessing"><img src="./images/small-prev.gif" title="Skill/Skill++Doc Manual entry" alt="" border="0" /></a> <br /></span>(<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_7.html#IDX173" title="R5RS Skill/Skill++ form">defun</a> <span class="signature">TcfFillDSPostProcessing</span> (lib cell rowType @key (OutputSuffix ""))
  (let (cat)
 (TccDebug "TcfFillPostProcessing" (sprintf nil "Tagging cell %L" (strcat cell "_filler_frame" OutputSuffix)))
  (setq cat (ddCatOpenEx (ddGetObj lib) cell "a" 1))
 (ddCatAddItem cat (strcat cell "_filler_frame" OutputSuffix) "cell")
 (ddCatSave cat)
 (ddCatClose cat)

 (unless (<a class="applied-name" href="fillerfunctions-1.html#TcfUnmanagedP" title="fillerfunctions">TcfUnmanagedP</a> lib (strcat cell "_filler_frame" OutputSuffix) "layout")
   (TccDebug "TcfFillPostProcessing" (sprintf nil "Checking in %L_filler cell" (strcat cell "_filler_frame" OutputSuffix)))
   (dssCheckinCellP lib (strcat cell "_filler_frame" OutputSuffix)
  ?new t
  ?comment "Checked-in by frame filler flow"
  ?silent nil))
 (when (equal rowType "custom")
   (unless (<a class="applied-name" href="fillerfunctions-1.html#TcfUnmanagedP" title="fillerfunctions">TcfUnmanagedP</a> lib cell "layout")
  (TccDebug "TcfFillPostProcessing" (sprintf nil "Checking in top level *custom* cell %s" cell))
  (dssCheckinCellP lib cell
 ?new t
 ?comment "Checked-in by frame filler flow"
 ?silent nil)))
 t))

<a name="TcfFillDSPreProcessing"></a><span></span>(<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_7.html#IDX173" title="R5RS Skill/Skill++ form">defun</a> <span class="signature">TcfFillDSPreProcessing</span> (lib cell rowType @key (OutputSuffix ""))
  (let (cat)
  (<a class="applied-name" href="fillerfunctions-1.html#TcfCheckWriteLocks" title="fillerfunctions">TcfCheckWriteLocks</a> lib (strcat cell "_filler_frame" OutputSuffix))
 (when (equal rowType "custom")
   (TccInfo  "TcfFill" (sprintf nil "Cell %s is a custom one." cell))

   (unless (<a class="applied-name" href="fillerfunctions-1.html#TcfUnmanagedP" title="fillerfunctions">TcfUnmanagedP</a> lib cell "layout")
  (unless (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX118" title="R5RS Skill/Skill++ form">or</a> (equal (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX325" title="R5RS Skill/Skill++ form">cadr</a> (dssCheckoutCellP lib cell ?mode "lock" ?silent nil)) 0)
  (equal (getShellEnvVar "USER") (dssIsViewLockedP lib cell "layout" ?vault t)))
 (TccWarn "TcfFill" (sprintf nil "Failed to check out cell %s in library %s." cell lib))
 (error (sprintf nil "Failed to check out cell %s in library %s" cell lib))))
   (<a class="applied-name" href="fillerfunctions-1.html#TcfCheckWriteLocks" title="fillerfunctions">TcfCheckWriteLocks</a> lib cell)
   (setq cat (ddCatOpenEx (ddGetObj lib) cell "a" 1))
   (ddCatAddItem cat cell "cell")
   (ddCatSave cat)
   (ddCatClose cat))

 (unless (<a class="applied-name" href="fillerfunctions-1.html#TcfUnmanagedP" title="fillerfunctions">TcfUnmanagedP</a> lib (strcat cell "_filler_frame" OutputSuffix) "layout")
   (unless (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX118" title="R5RS Skill/Skill++ form">or</a> (equal (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX325" title="R5RS Skill/Skill++ form">cadr</a> (dssCheckoutCellP lib (strcat cell "_filler_frame" OutputSuffix) ?mode "lock" ?silent nil)) 0)
   (equal (getShellEnvVar "USER") (dssIsViewLockedP lib (strcat cell "_filler_frame" OutputSuffix) "layout" ?vault t)))
  (TccWarn "TcfFill" (sprintf nil "Failed to check out cell %s in library %s" (strcat cell "_filler_frame" OutputSuffix) lib))
  (error (sprintf nil "Failed to check out cell %s in library %s." (strcat cell "_filler_frame" OutputSuffix) lib))))
 t)) <a name="TcfFillerRename"></a>
<a name="TcfFillerRename"></a><span><a href="../fillerfunctions.html#TcfFillerRename"><img src="./images/small-prev.gif" title="Skill/Skill++Doc Manual entry" alt="" border="0" /></a> <br /></span>(<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_7.html#IDX173" title="R5RS Skill/Skill++ form">defun</a> <span class="signature">TcfFillerRename</span> (lib cell @key (OutputSuffix ""))
  (let (oldCv newCv ddObj tempCv)
 (TccInfo "TcfFill" (sprintf nil "Looking for cell %L in library %L" (strcat cell "_filler_frame" OutputSuffix) lib))
 (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (setq ddObj (ddGetObj lib (strcat cell "_filler_frame" OutputSuffix)))
  (TccInfo "TcfFill" (sprintf nil "Found. Clearing contents of cell %L in library %L" (strcat cell "_filler_frame" OutputSuffix) lib))
   (TccInfo "TcfFill" (sprintf nil "Not found. Creating cell %L in library %L" (strcat cell "_filler_frame" OutputSuffix) lib)))
 (unless (setq tempCv (dbOpenCellViewByType lib (strcat cell "_filler_frame" OutputSuffix) "layout" "maskLayout" "w"))
   (TccWarn "Filler Flow" (sprintf nil "Failed to open cell %L %L for write" lib (strcat cell "_filler_frame" OutputSuffix)))
   (error (sprintf nil "Filler Flow: Failed to open cell %L %L for write" lib (strcat cell "_filler_frame" OutputSuffix))))
 (unless (dbSave tempCv)
   (TccWarn "Filler Flow" (sprintf nil "Failed to save cell %L %L" lib (strcat cell "_filler_frame" OutputSuffix)))
   (error (sprintf nil "Filler Flow: Failed to save cell %L %L" lib (strcat cell "_filler_frame" OutputSuffix))))
 (unless (dbPurge tempCv)
   (TccWarn "Filler Flow" (sprintf nil "Failed to save purge %L %L" lib (strcat cell "_filler_frame" OutputSuffix)))
   (error (sprintf nil "Filler Flow: Failed to purge %L %L" lib (strcat cell "_filler_frame" OutputSuffix))))
 (unless (setq tempCv (dbOpenCellViewByType lib (strcat cell "_filler_frame" OutputSuffix) "layout" "maskLayout" "w"))
   (TccWarn "Filler Flow" (sprintf nil "Failed to open cell %L %L for write" lib (strcat cell "_filler_frame" OutputSuffix)))
   (error (sprintf nil "Filler Flow: Failed to open cell %L %L for write" lib (strcat cell "_filler_frame" OutputSuffix))))

 (dbClose tempCv)
  )) <a name="TcfDeleteOverlayInst"></a>
<a name="TcfDeleteOverlayInst"></a><span><a href="../fillerfunctions.html#TcfDeleteOverlayInst"><img src="./images/small-prev.gif" title="Skill/Skill++Doc Manual entry" alt="" border="0" /></a> <br /></span>(<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_7.html#IDX173" title="R5RS Skill/Skill++ form">defun</a> <span class="signature">TcfDeleteOverlayInst</span> (rowCv @key (OutputSuffix ""))
  (let (inst lib cell)
 (setq lib (getSGq rowCv libName))
 (setq cell (getSGq rowCv cellName))

 (TccInfo "TcfFill" (sprintf nil "Looking for previous instances of %L in %L" (strcat cell "_filler") cell))
 (setq inst (setofs x (getSGq rowCv instances) (equal (getSGq x cellName) (strcat cell "_filler"))))
 (foreachs elem inst
  (TccInfo "TcfFill" (sprintf nil "Deleting instance of %L from %L" (strcat cell "_filler") cell))
  (dbDeleteObject elem))
 (TccInfo "TcfFill" (sprintf nil "Saving %L" cell))
 (TccInfo "TcfFill" (sprintf nil "Looking for previous instances of %L in %L" (strcat cell "_filler_frame" OutputSuffix) cell))
 (setq inst (setofs x (getSGq rowCv instances) (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX118" title="R5RS Skill/Skill++ form">or</a> (equal (getSGq x cellName) (strcat cell "_filler_frame" OutputSuffix))
   (equal (getSGq x baseName) "filler_frame")
  )))
 (foreachs elem inst
  (TccInfo "TcfFill" (sprintf nil "Deleting instance of %L from %L" (strcat cell "_filler_frame" OutputSuffix) cell))
  (dbDeleteObject elem))
 (TccInfo "TcfFill" (sprintf nil "Saving %L" cell))
 (unless (dbSave rowCv)
   (TccWarn "Filler Flow" (sprintf nil "Failed to save cell view %L %L" lib cell))
   (error (sprintf nil "Filler Flow: Failed to save cell view %L %L" lib cell)))
 t)) 
<a name="TcfFill"></a><a name="TcfFill"></a><span><a href="../fillerfunctions.html#TcfFill"><img src="./images/small-prev.gif" title="Skill/Skill++Doc Manual entry" alt="" border="0" /></a> <br /></span>(<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_7.html#IDX173" title="R5RS Skill/Skill++ form">defun</a> <span class="signature">TcfFill</span> (cvId @key (Orientation "R0")
   (lstFillerLayers (TcfGetDefaultKeepGenAwayLayers))
   (chkConsistency nil)
   (maxDepth (dbGetMaxHierDepth))
   (singlepass nil)
   (contourPolygon nil) (DSPostProcessing nil)
   (OutputSuffix "")
   (PlaceFiller t))
  (let ((rotatedModes (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "R90" "R270" "MYR90" "MXR90"))
  befillercell OffsetX OffsetY tempCV objList comPat2m comPat2v isMetal lstDebugLayers lstCopiedLayers fillWithCell
  lstFillerLayersF referenceCv objListDraw objListOutside objListIgnore objListOutsideFinal (fillError nil) techId lstProblemLayers lstKeepGenAwayLayers lstKeepGenAwayLayersLow lstKeepGenAwayLayersUp (lstExcludeRexExpression "^(tp1stacked)+|(tp1beard)+|(tp1eow)+") contourPolygonCopied ToFillShape)

  (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> singlepass
  (setq lstExcludeRexExpression "^(tp0stackedfiller)+|(tp1stacked)+|(tp0bestacked)+|(tp1beard)+|(tp1eow)+")
  ) 
  (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (stringp lstFillerLayers)
  (setq lstFillerLayers (parseString lstFillerLayers))
  ) 
  (setq techId (techGetTechFile cvId))
 (setq comPat2m (pcreCompile "^metal[cs]*")) (setq comPat2v (pcreCompile "^via[abc]*")) 
  (when (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX340" title="R5RS Skill/Skill++ form">member</a> cvId~>mode (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "a" "w"))
   (dbSave cvId)
  ) 
  (when (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX117" title="R5RS Skill/Skill++ form">and</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX340" title="R5RS Skill/Skill++ form">member</a> cvId~>mode (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "r" "w")) PlaceFiller)
   (dbReopen cvId "a")
  ) 
  (<a class="applied-name" href="fillerfunctions-1.html#TcfFillDSPreProcessing" title="fillerfunctions">TcfFillDSPreProcessing</a> cvId~>libName cvId~>cellName "custom" ?OutputSuffix OutputSuffix)

  (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> PlaceFiller
  (<a class="applied-name" href="fillerfunctions-1.html#TcfDeleteOverlayInst" title="fillerfunctions">TcfDeleteOverlayInst</a> cvId ?OutputSuffix OutputSuffix))

  (<a class="applied-name" href="fillerfunctions-1.html#TcfFillerRename" title="fillerfunctions">TcfFillerRename</a> cvId~>libName cvId~>cellName ?OutputSuffix OutputSuffix)
 (setq tempCV (dbOpenCellViewByType cvId~>libName (strcat cvId~>cellName "_filler_frame" OutputSuffix) "layout" "maskLayout" "w"))

  (setq ToFillShape (TcfGetShapes cvId))
 
  (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (dbIsId contourPolygon)
  (setq contourPolygonCopied (dbCopyFig contourPolygon tempCV))

   (setq contourPolygonCopied (dbCopyFig (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX325" title="R5RS Skill/Skill++ form">caar</a> ToFillShape) tempCV (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX325" title="R5RS Skill/Skill++ form">cadar</a> ToFillShape)))
  ) 
  (setq lstFillerLayersF (TcfFilterFillerLayers lstFillerLayers))
 (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (TccGreaterp (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX333" title="R5RS Skill/Skill++ form">length</a> lstFillerLayersF) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX333" title="R5RS Skill/Skill++ form">length</a> lstFillerLayers))
  (setq lstFillerLayersF lstFillerLayers)
  ) (TccInfo "TcfFill" (sprintf nil "Using list of filler layers = %L" lstFillerLayersF))

  (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> singlepass
  (progn
 (TccInfo "TcfFill" (sprintf nil "*** Using single pass filler flow ***"))

  (setq objList (TcfGetTrueOverlaps cvId
  (getSGq cvId bBox)
  nil   maxDepth ?userTempCV tempCV ?returnCopies t ?lstExcludeRexExpression lstExcludeRexExpression ?lstLayers (mapcar (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX98" title="R5RS Skill/Skill++ form">lambda</a> (<span class="local-name-binding">x</span>) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> x (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX325" title="R5RS Skill/Skill++ form">cadr</a> (TcfGetDefaultLPPFillerKeepGenAwayPurpose ?cvId cvId)))) lstFillerLayersF)))
 (dbSave tempCV)

  (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (ddGetObj
   (TcfXmlFind (upperCase (TcfGetProjectName)) "stacked_filler_extra" "Library")
   (TcfXmlFind (upperCase (TcfGetProjectName)) "stacked_filler_extra" "CellName"))
  (progn
 (setq befillercell (dbOpenCellViewByType (TcfXmlFind (upperCase (TcfGetProjectName)) "stacked_filler_extra" "Library")
   (TcfXmlFind (upperCase (TcfGetProjectName)) "stacked_filler_extra" "CellName")
   "layout" "maskLayout" "r"))
 (foreachs layer lstFillerLayersF
 (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX340" title="R5RS Skill/Skill++ form">member</a> layer befillercell~>lpps~>layerName)
   (setq lstKeepGenAwayLayersUp (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX320" title="R5RS Skill/Skill++ form">cons</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> layer (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX325" title="R5RS Skill/Skill++ form">cadr</a> (TcfGetDefaultLPPFillerKeepGenAwayPurpose ?cvId cvId))) lstKeepGenAwayLayersUp))
 (setq lstKeepGenAwayLayersLow (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX320" title="R5RS Skill/Skill++ form">cons</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> layer (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX325" title="R5RS Skill/Skill++ form">cadr</a> (TcfGetDefaultLPPFillerKeepGenAwayPurpose ?cvId cvId))) lstKeepGenAwayLayersLow))
  )) (dbClose befillercell)
  ) (setq lstKeepGenAwayLayersLow (mapcar (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX98" title="R5RS Skill/Skill++ form">lambda</a> (<span class="local-name-binding">x</span>) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> x (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX325" title="R5RS Skill/Skill++ form">cadr</a> (TcfGetDefaultLPPFillerKeepGenAwayPurpose ?cvId cvId)))) lstFillerLayersF))
  ) 
 (TccInfo "TcfFill" (sprintf nil "Reacting to low keepout layers = %L" lstKeepGenAwayLayersLow))

  (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (ddGetObj
   (TcfXmlFind (upperCase (TcfGetProjectName)) "stacked_filler" "Library")
   (TcfXmlFind (upperCase (TcfGetProjectName)) "stacked_filler" "CellName"))
  (progn (<a class="applied-name" href="fillerfunctions-1.html#TcfFillWithCell" title="fillerfunctions">TcfFillWithCell</a>
 tempCV
 ?LibName (TcfXmlFind (TcfGetProjectName) "stacked_filler" "Library")
 ?CellName (TcfXmlFind (TcfGetProjectName) "stacked_filler" "CellName")
 ?Orientation (TcfXmlFind (TcfGetProjectName) "stacked_filler" "Orientation")
 ?lstBlockingLayers lstKeepGenAwayLayersLow
 ?lstIDLayers lstKeepGenAwayLayersLow
 ?snapKeepGenAway t
 ?lstExcludeRexExpression lstExcludeRexExpression
 ?contourPolygon contourPolygonCopied)
   (TccInfo "TcfFill" "Placement of lower stacked filler succesfully finished.")
  ) (TccWarn "TcfFill" "Missing stacked filler cell. Output fill pattern may result empty!")
  ) 
  (when (ddGetObj
  (TcfXmlFind (upperCase (TcfGetProjectName)) "stacked_filler_extra" "Library")
  (TcfXmlFind (upperCase (TcfGetProjectName)) "stacked_filler_extra" "CellName"))
   (<a class="applied-name" href="fillerfunctions-1.html#TcfFillWithCell" title="fillerfunctions">TcfFillWithCell</a>
 tempCV
 ?LibName (TcfXmlFind (upperCase (TcfGetProjectName)) "stacked_filler_extra" "Library")
 ?CellName (TcfXmlFind (upperCase (TcfGetProjectName)) "stacked_filler_extra" "CellName")
 ?Orientation (TcfXmlFind (TcfGetProjectName) "stacked_filler_extra" "Orientation")
 ?lstBlockingLayers lstKeepGenAwayLayersUp
 ?lstIDLayers lstKeepGenAwayLayersUp
 ?snapKeepGenAway t
 ?lstExcludeRexExpression lstExcludeRexExpression
 ?contourPolygon contourPolygonCopied)
   (TccInfo "TcfFill" "Placement of upper stacked filler succesfully finished.")
  ) 
  (when (ddGetObj
  (TcfXmlFind (upperCase (TcfGetProjectName)) "filler_polycheck" "Library")
  (TcfXmlFind (upperCase (TcfGetProjectName)) "filler_polycheck" "CellName"))
   (<a class="applied-name" href="fillerfunctions-1.html#TcfFillWithCell" title="fillerfunctions">TcfFillWithCell</a>
 tempCV
 ?LibName (TcfXmlFind (upperCase (TcfGetProjectName)) "filler_polycheck" "Library")
 ?CellName (TcfXmlFind (upperCase (TcfGetProjectName)) "filler_polycheck" "CellName")
 ?Orientation (TcfXmlFind (TcfGetProjectName) "filler_polycheck" "Orientation")
 ?lstBlockingLayers nil
 ?lstIDLayers nil
 ?snapKeepGenAway t
 ?lstExcludeRexExpression lstExcludeRexExpression
 ?contourPolygon contourPolygonCopied)
   (TccInfo "TcfFill" "Placement of polycheck filler succesfully finished.")
  )) 
   (progn
  (TccInfo "TcfFill" (sprintf nil "*** Using multi pass filler flow ***"))

 (setq lstCopiedLayers (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX334" title="R5RS Skill/Skill++ form">append</a>
 (mapcar (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX98" title="R5RS Skill/Skill++ form">lambda</a> (<span class="local-name-binding">x</span>) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> x (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX325" title="R5RS Skill/Skill++ form">cadr</a> (TcfGetDefaultLPPFillerKeepGenAwayPurpose ?cvId cvId)))) lstFillerLayersF)
 (mapcar (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX98" title="R5RS Skill/Skill++ form">lambda</a> (<span class="local-name-binding">x</span>) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> x "tccFillKeepout")) lstFillerLayersF)))
  (setq lstCopiedLayers (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX334" title="R5RS Skill/Skill++ form">append</a>
 lstCopiedLayers
 (mapcar (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX98" title="R5RS Skill/Skill++ form">lambda</a> (<span class="local-name-binding">x</span>) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> x (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX321" title="R5RS Skill/Skill++ form">car</a> (TcfGetDefaultLPPFillerKeepGenAwayPurpose ?cvId cvId)))) lstFillerLayersF)))
  (setq lstCopiedLayers (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX334" title="R5RS Skill/Skill++ form">append</a>
 lstCopiedLayers
 (mapcar (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX98" title="R5RS Skill/Skill++ form">lambda</a> (<span class="local-name-binding">x</span>) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> x "tccFillIgnore")) lstFillerLayersF)))
  (setq lstCopiedLayers (TcfRemoveLstDuplicateItems lstCopiedLayers))
  (setq lstCopiedLayers (setofs x lstCopiedLayers (techGetLP techId x)))

 (setq objList (TcfGetTrueOverlaps cvId
   (getSGq cvId bBox)
   nil
   maxDepth
   ?userTempCV tempCV
   ?returnCopies t
   ?lstExcludeRexExpression lstExcludeRexExpression
   ?lstLayers lstCopiedLayers))
  (foreachs layer lstFillerLayersF
   (setq lstKeepGenAwayLayers
   (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a>
  (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> layer (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX325" title="R5RS Skill/Skill++ form">cadr</a> (TcfGetDefaultLPPFillerKeepGenAwayPurpose ?cvId cvId)))
  (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> (pcreReplace comPat2v layer "via" 0) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX325" title="R5RS Skill/Skill++ form">cadr</a> (TcfGetDefaultLPPFillerKeepGenAwayPurpose ?cvId cvId)))
  (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> (pcreReplace comPat2m layer "metal" 0) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX325" title="R5RS Skill/Skill++ form">cadr</a> (TcfGetDefaultLPPFillerKeepGenAwayPurpose ?cvId cvId)))
  )) 
   (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (pcreExecute comPat2v layer)
 (setq lstKeepGenAwayLayers (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX334" title="R5RS Skill/Skill++ form">append</a> lstKeepGenAwayLayers
   (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a>
  (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> (TcfGetAdjacentLayers (pcreReplace comPat2v layer "via" 0))->top (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX325" title="R5RS Skill/Skill++ form">cadr</a> (TcfGetDefaultLPPFillerKeepGenAwayPurpose ?cvId cvId)))
  (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> (TcfGetAdjacentLayers (pcreReplace comPat2v layer "via" 0))->bot (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX325" title="R5RS Skill/Skill++ form">cadr</a> (TcfGetDefaultLPPFillerKeepGenAwayPurpose ?cvId cvId)))))) ) 
   (fors i 0 (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX333" title="R5RS Skill/Skill++ form">length</a> lstKeepGenAwayLayers)
   (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (equal (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX325" title="R5RS Skill/Skill++ form">cadr</a> (nth i lstKeepGenAwayLayers)) "keepGenAway")
 (setq lstKeepGenAwayLayers (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX320" title="R5RS Skill/Skill++ form">cons</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX321" title="R5RS Skill/Skill++ form">car</a> (nth i lstKeepGenAwayLayers)) "tccFillKeepout") lstKeepGenAwayLayers))
  )) (setq lstKeepGenAwayLayers (TcfRemoveLstDuplicateItems lstKeepGenAwayLayers))
   (setq lstKeepGenAwayLayers (setofs x lstKeepGenAwayLayers (techGetLP techId x)))

   (TccInfo "TcfFill" (sprintf nil "Placing filler cells %L for layer: %L, responding to filler layers = %L"
 (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (ddGetObj
   (TcfXmlFind (upperCase (TcfGetProjectName)) (strcat "filler_" (lowerCase layer)) "Library")
   (TcfXmlFind (upperCase (TcfGetProjectName)) (strcat "filler_" (lowerCase layer)) "CellName"))
  (TcfXmlFind (upperCase (TcfGetProjectName)) (strcat "filler_" (lowerCase layer)) "CellName")
   (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX321" title="R5RS Skill/Skill++ form">car</a> (TcfGetLstFillerCells layer)))
 layer lstKeepGenAwayLayers))

   (setq fillWithCell (ddGetObj (TcfXmlFind (upperCase (TcfGetProjectName)) (strcat "filler_" (lowerCase layer)) "Library")
  (TcfXmlFind (upperCase (TcfGetProjectName)) (strcat "filler_" (lowerCase layer)) "CellName")))
   (unless fillWithCell
  (setq fillWithCell (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX321" title="R5RS Skill/Skill++ form">car</a> (TcfGetLstFillerCells layer)))
  (TccWarn "TcfFill" (sprintf nil "*** Fallback to TCE filler cell %L for layer %L ***" fillWithCell layer))
  ) 
   (when fillWithCell
  (TccInfo "TcfFill" (sprintf nil "Starting placement of filler cells for layer %L ..." layer))
  (unless (ddGetObj (TcfXmlFind (upperCase (TcfGetProjectName)) (strcat "filler_" (lowerCase layer)) "Library")
  (TcfXmlFind (upperCase (TcfGetProjectName)) (strcat "filler_" (lowerCase layer)) "CellName"))
 (TccInfo "TcfFill"
 (sprintf nil "Offset X inside stacked filler = %L, Offset X inside filler cell = %L"
 (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX321" title="R5RS Skill/Skill++ form">car</a> (nth 4 (TcfGetFillerCellInfo layer ?customLib (TcfXmlFind (TcfGetProjectName) "stacked_filler_sea" "Library") ?customCell (TcfXmlFind (TcfGetProjectName) "stacked_filler_sea" "CellName"))))
 (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX321" title="R5RS Skill/Skill++ form">car</a> (nth 4 (TcfGetFillerCellInfo layer)))))
 (TccInfo "TcfFill"
 (sprintf nil "Offset Y inside stacked filler = %L, Offset Y inside filler cell = %L"
 (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX325" title="R5RS Skill/Skill++ form">cadr</a> (nth 4 (TcfGetFillerCellInfo layer ?customLib (TcfXmlFind (TcfGetProjectName) "stacked_filler_sea" "Library") ?customCell (TcfXmlFind (TcfGetProjectName) "stacked_filler_sea" "CellName"))))
 (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX325" title="R5RS Skill/Skill++ form">cadr</a> (nth 4 (TcfGetFillerCellInfo layer)))))
  ) 
  (setq OffsetX (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (ddGetObj (TcfXmlFind (upperCase (TcfGetProjectName)) (strcat "filler_" (lowerCase layer)) "Library")
   (TcfXmlFind (upperCase (TcfGetProjectName)) (strcat "filler_" (lowerCase layer)) "CellName"))
  0.0
   (difference  (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX321" title="R5RS Skill/Skill++ form">car</a> (nth 4 (TcfGetFillerCellInfo layer ?customLib (TcfXmlFind (TcfGetProjectName) "stacked_filler_sea" "Library") ?customCell (TcfXmlFind (TcfGetProjectName) "stacked_filler_sea" "CellName"))))
 (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX321" title="R5RS Skill/Skill++ form">car</a> (nth 4 (TcfGetFillerCellInfo layer))))))
  (setq OffsetY (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (ddGetObj (TcfXmlFind (upperCase (TcfGetProjectName)) (strcat "filler_" (lowerCase layer)) "Library")
   (TcfXmlFind (upperCase (TcfGetProjectName)) (strcat "filler_" (lowerCase layer)) "CellName"))
  0.0
   (difference  (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX325" title="R5RS Skill/Skill++ form">cadr</a> (nth 4 (TcfGetFillerCellInfo layer ?customLib (TcfXmlFind (TcfGetProjectName) "stacked_filler_sea" "Library") ?customCell (TcfXmlFind (TcfGetProjectName) "stacked_filler_sea" "CellName"))))
 (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX325" title="R5RS Skill/Skill++ form">cadr</a> (nth 4 (TcfGetFillerCellInfo layer))))))

  (TccInfo "TcfFill" (sprintf nil "Offset X = %L, Offset Y = %L" OffsetX OffsetY))
  (<a class="applied-name" href="fillerfunctions-1.html#TcfFillWithCell" title="fillerfunctions">TcfFillWithCell</a>
   tempCV
   ?auxCv nil ?LibName (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (ddGetObj (TcfXmlFind (upperCase (TcfGetProjectName)) (strcat "filler_" (lowerCase layer)) "Library")
  (TcfXmlFind (upperCase (TcfGetProjectName)) (strcat "filler_" (lowerCase layer)) "CellName")
  ) (TcfXmlFind (upperCase (TcfGetProjectName)) (strcat "filler_" (lowerCase layer)) "Library")
  (TccLib "pad"))
   ?CellName (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (ddGetObj (TcfXmlFind (upperCase (TcfGetProjectName)) (strcat "filler_" (lowerCase layer)) "Library")
   (TcfXmlFind (upperCase (TcfGetProjectName)) (strcat "filler_" (lowerCase layer)) "CellName")
  ) (TcfXmlFind (upperCase (TcfGetProjectName)) (strcat "filler_" (lowerCase layer)) "CellName")
   (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX321" title="R5RS Skill/Skill++ form">car</a> (TcfGetLstFillerCells layer)))
   ?OffsetY OffsetY
   ?OffsetX OffsetX
   ?Orientation (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (ddGetObj (TcfXmlFind (upperCase (TcfGetProjectName)) (strcat "filler_" (lowerCase layer)) "Library")
   (TcfXmlFind (upperCase (TcfGetProjectName)) (strcat "filler_" (lowerCase layer)) "CellName"))
  (TcfXmlFind (upperCase (TcfGetProjectName)) (strcat "filler_" (lowerCase layer)) "Orientation")
   Orientation)
   ?lstBlockingLayers lstKeepGenAwayLayers
   ?lstIgnoreLayers (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a>
   (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> layer (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX321" title="R5RS Skill/Skill++ form">car</a> (TcfGetDefaultLPPFillerKeepGenAwayPurpose ?cvId cvId)))
   (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> layer "tccFillIgnore")) ?lstIDLayers (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a>
  (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> layer (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX325" title="R5RS Skill/Skill++ form">cadr</a> (TcfGetDefaultLPPFillerKeepGenAwayPurpose ?cvId cvId)))
  (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> layer "tccFillKeepout")) ?lstExcludeRexExpression lstExcludeRexExpression
   ?contourPolygon contourPolygonCopied
   ?maxDepth 0)

 (dbSave tempCV)
  ) 
   (TccInfo "TcfFill" (sprintf nil "Filling of layer %L succesfully concluded!
" layer))
  ) 
  )) 
  (mapcar 'dbDeleteObject (TccFlattenList (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> (dbGetTrueOverlaps tempCV tempCV~>bBox (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "background" "drawing") 0))))
 lstDebugLayers <a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX235" title="R5RS Skill/Skill++ form">=</a> (setofs x tempCV~>lpps (equal x~>purpose (TcfGetDefaultLPPDebugPurpose ?cvId tempCV)))~>layerName
 (foreachs elem lstDebugLayers
  (mapcar 'dbDeleteObject (TccFlattenList (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> (dbGetTrueOverlaps tempCV tempCV~>bBox (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> elem (TcfGetDefaultLPPDebugPurpose ?cvId tempCV)) 0))))
  ) 
 (dbSave tempCV)
 (dbReopen tempCV "r")
 (dbRefreshCellView tempCV)

  (when (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX117" title="R5RS Skill/Skill++ form">and</a> PlaceFiller (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX340" title="R5RS Skill/Skill++ form">member</a> cvId~>mode (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "a" "w")))
   (dbCreateInst cvId tempCV "filler_frame" (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> 0.0 0.0) "R0" 1)
   (dbSave cvId)
  ) 
  (dbReopen cvId "r")
 (dbRefreshCellView cvId)
 (dbClose tempCV)

  (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> DSPostProcessing
  (<a class="applied-name" href="fillerfunctions-1.html#TcfFillDSPostProcessing" title="fillerfunctions">TcfFillDSPostProcessing</a> cvId~>libName cvId~>cellName "custom" ?OutputSuffix OutputSuffix)
  ) 
 (TccInfo "TcfFill" "*** Filler flow has succesfully finished. ***")
 t
  )) <a name="TcfFillWithCell"></a>
<a name="TcfFillWithCell"></a><span><a href="../fillerfunctions.html#TcfFillWithCell"><img src="./images/small-prev.gif" title="Skill/Skill++Doc Manual entry" alt="" border="0" /></a> <br /></span>(<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_7.html#IDX173" title="R5RS Skill/Skill++ form">defun</a> <span class="signature">TcfFillWithCell</span> (cvId @key
  (auxCv nil)
  (LibName (TcfXmlFind (TcfGetProjectName) "stacked_filler" "Library"))
  (CellName (TcfXmlFind (TcfGetProjectName) "stacked_filler" "CellName"))
  (Orientation (TcfXmlFind (TcfGetProjectName) "stacked_filler" "Orientation"))
  (OffsetX 0.0)
  (OffsetY 0.0)
  (lstBlockingLayers (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "FrameConstruct" (TcfGetDefaultLPPKeepoutPurpose)))) (lstIgnoreLayers nil)
  (lstIDLayers nil)
  (maxDepth (dbGetMaxHierDepth))
  (snapKeepGenAway t)
  (lstExcludeRexExpression " ")
  (contourPolygon nil))
  (let (NoFillShape
  NoFillShapeOr FullShape ToFillShape fillerCv MosaicX MosaicY dbId techId shiftX shiftY shape_bBox passShape noPassShape passShapeOr
  (rotatedModes (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "R90" "R270" "MYR90" "MXR90")) lstBBoxes comPat2v comPat2vr vialayer topmetal botmetal lstShapes lstShapesOrig finalNoFillShape)

  (setq comPat2v (pcreCompile "^via[abc]*")) (setq comPat2vr (pcreCompile "^via[abc]*[0-9]+")) 
  (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (dbIsId cvId)
  (setq dbId cvId)
   (setq dbId (ddGetObj (TccLib "scribe"))))
 (setq techId (techGetTechFile dbId))
 (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (dbIsId auxCv) (dbRefreshCellView auxCv))

  (setq fillerCv (dbOpenCellViewByType LibName CellName "layout" "maskLayout" "r"))

  (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (dbIsId contourPolygon)
  (setq FullShape contourPolygon)

   (progn
 (setq FullShape (TcfGetTrueOverlaps (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (dbIsId auxCv) auxCv cvId) (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (dbIsId auxCv) auxCv cvId)~>bBox (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "chkBoundary" "boundary") maxDepth ?userTempCV cvId ?returnCopies t ?lstExcludeRexExpression lstExcludeRexExpression))

  (setq FullShape (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX321" title="R5RS Skill/Skill++ form">car</a> (TccFlattenList (dbLayerOr cvId (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "yellow" (TcfGetDefaultLPPDebugPurpose ?cvId cvId))
  (TccFlattenList FullShape) nil))))
  )) 
 (unless (dbIsId FullShape)
   (error "The input layout lacks of an outermost chkBoundary")
  ) 
 (foreachs layerelement lstBlockingLayers
  (TccInfo "TcfFillWithCell" (sprintf nil "Copying shapes on filler blockage layer: %L" layerelement))
  (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (techGetLP techId layerelement)
   (progn
 (setq lstShapes (TcfGetTrueOverlaps (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (dbIsId auxCv) auxCv cvId) (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (dbIsId auxCv) auxCv cvId)~>bBox layerelement (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (dbIsId auxCv) maxDepth 0) ?userTempCV cvId ?returnCopies (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (dbIsId auxCv) t nil) ?lstExcludeRexExpression lstExcludeRexExpression))

  (setq lstShapes (dbLayerOr cvId (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "red" (TcfGetDefaultLPPDebugPurpose ?cvId cvId)) (TccFlattenList (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> lstShapes)) nil 4))
  (setq lstBBoxes (mapcar (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX98" title="R5RS Skill/Skill++ form">lambda</a> (<span class="local-name-binding">x</span>) (getSGq x bBox)) (TccFlattenList (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> lstShapes))))

 (when (pcreExecute comPat2vr (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX321" title="R5RS Skill/Skill++ form">car</a> layerelement))
 (TccInfo "TcfFillWithCell" (sprintf nil "Operating on via layers %L" layerelement))
 (setq vialayerelement (pcreReplace comPat2v (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX321" title="R5RS Skill/Skill++ form">car</a> layerelement) "via" 0))
 (setq topmetal (TcfGetAdjacentLayers vialayerelement)->top)
 (setq botmetal (TcfGetAdjacentLayers vialayerelement)->bot)
 (TccInfo "TcfFillWithCell" (sprintf nil "Expanding box to %L and %L" topmetal botmetal))
 (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> snapKeepGenAway
  (setq lstBBoxes (mapcar (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX98" title="R5RS Skill/Skill++ form">lambda</a> (<span class="local-name-binding">x</span>)
  (trBBoxUnion
  (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a>
   (<a class="applied-name" href="fillerfunctions-1.html#TcfSnapBBoxToCell" title="fillerfunctions">TcfSnapBBoxToCell</a>
 x
 (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (ddGetObj (TcfXmlFind (upperCase (TcfGetProjectName)) (strcat "filler_" topmetal) "Library")
   (TcfXmlFind (upperCase (TcfGetProjectName)) (strcat "filler_" topmetal) "CellName"))
  (TcfXmlFind (upperCase (TcfGetProjectName)) (strcat "filler_" topmetal) "Library") LibName)
 (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (ddGetObj (TcfXmlFind (upperCase (TcfGetProjectName)) (strcat "filler_" topmetal) "Library")
   (TcfXmlFind (upperCase (TcfGetProjectName)) (strcat "filler_" topmetal) "CellName"))
  (TcfXmlFind (upperCase (TcfGetProjectName)) (strcat "filler_" topmetal) "CellName")
   (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX321" title="R5RS Skill/Skill++ form">car</a> (TcfGetLstFillerCells topmetal)))
 (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (ddGetObj (TcfXmlFind (upperCase (TcfGetProjectName)) (strcat "filler_" topmetal) "Library")
   (TcfXmlFind (upperCase (TcfGetProjectName)) (strcat "filler_" topmetal) "CellName"))
  (TcfXmlFind (upperCase (TcfGetProjectName)) (strcat "filler_" topmetal) "Orientation") Orientation)
 (xCoord (lowerLeft (getSGq FullShape bBox)))
 (yCoord (lowerLeft (getSGq FullShape bBox)))
 ?grow t)
   (<a class="applied-name" href="fillerfunctions-1.html#TcfSnapBBoxToCell" title="fillerfunctions">TcfSnapBBoxToCell</a>
 x
 (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (ddGetObj (TcfXmlFind (upperCase (TcfGetProjectName)) (strcat "filler_" botmetal) "Library")
   (TcfXmlFind (upperCase (TcfGetProjectName)) (strcat "filler_" botmetal) "CellName"))
  (TcfXmlFind (upperCase (TcfGetProjectName)) (strcat "filler_" botmetal) "Library") LibName)
 (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (ddGetObj (TcfXmlFind (upperCase (TcfGetProjectName)) (strcat "filler_" botmetal) "Library")
   (TcfXmlFind (upperCase (TcfGetProjectName)) (strcat "filler_" botmetal) "CellName"))
  (TcfXmlFind (upperCase (TcfGetProjectName)) (strcat "filler_" botmetal) "CellName")
   (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX321" title="R5RS Skill/Skill++ form">car</a> (TcfGetLstFillerCells botmetal)))
 (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (ddGetObj (TcfXmlFind (upperCase (TcfGetProjectName)) (strcat "filler_" botmetal) "Library")
   (TcfXmlFind (upperCase (TcfGetProjectName)) (strcat "filler_" botmetal) "CellName"))
  (TcfXmlFind (upperCase (TcfGetProjectName)) (strcat "filler_" botmetal) "Orientation") Orientation)
 (xCoord (lowerLeft (getSGq FullShape bBox)))
 (yCoord (lowerLeft (getSGq FullShape bBox)))
 ?grow t)
  )) ) lstBBoxes))
  )) (foreachs elemband lstBBoxes
   (setq NoFillShape (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX320" title="R5RS Skill/Skill++ form">cons</a> (dbCreateRect cvId (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "pink" (TcfGetDefaultLPPDebugPurpose ?cvId cvId))
  (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> snapKeepGenAway (<a class="applied-name" href="fillerfunctions-1.html#TcfSnapBBoxToCell" title="fillerfunctions">TcfSnapBBoxToCell</a>
  elemband
  LibName
  CellName
  Orientation
  (xCoord (lowerLeft (getSGq FullShape bBox)))
  (yCoord (lowerLeft (getSGq FullShape bBox)))
  ?grow t) (getSGq FullShape bBox))) NoFillShape))
  )) (TccInfo "TcfFillWithCell" (sprintf nil "Invalid layer %L" layerelement))
  )) (dbSave cvId)

  (setq NoFillShapeOr (dbLayerOr cvId (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "blue" (TcfGetDefaultLPPDebugPurpose ?cvId cvId)) (TccFlattenList (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> NoFillShape))))

  (foreachs layerelement (TcfRemoveLstDuplicateItems lstIgnoreLayers)
  (TccInfo "TcfFillWithCell" (sprintf nil "Copying shapes on filler ignore layer: %L" layerelement))
  (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (techGetLP techId layerelement)
   (progn
 (setq lstShapes (TcfGetTrueOverlaps (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (dbIsId auxCv) auxCv cvId) (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (dbIsId auxCv) auxCv cvId)~>bBox layerelement (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (dbIsId auxCv) maxDepth 0) ?userTempCV cvId ?returnCopies (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (dbIsId auxCv) t nil) ?lstExcludeRexExpression lstExcludeRexExpression))

  (setq lstShapes (dbLayerOr cvId (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "red" (TcfGetDefaultLPPDebugPurpose ?cvId cvId)) (TccFlattenList (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> lstShapes)) nil 4))
  (setq lstBBoxes (mapcar (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX98" title="R5RS Skill/Skill++ form">lambda</a> (<span class="local-name-binding">x</span>) (getSGq x bBox)) (TccFlattenList (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> lstShapes))))

  (foreachs elemband lstBBoxes
   (setq passShape (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX320" title="R5RS Skill/Skill++ form">cons</a> (dbCreateRect cvId (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "pink" (TcfGetDefaultLPPDebugPurpose ?cvId cvId))
   (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> snapKeepGenAway (<a class="applied-name" href="fillerfunctions-1.html#TcfSnapBBoxToCell" title="fillerfunctions">TcfSnapBBoxToCell</a>
   elemband
   LibName
   CellName
   Orientation
   (xCoord (lowerLeft (getSGq FullShape bBox)))
   (yCoord (lowerLeft (getSGq FullShape bBox)))
   ?grow t) (getSGq FullShape bBox))) passShape))
   (setq noPassShape (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX320" title="R5RS Skill/Skill++ form">cons</a> (dbCreateRect cvId (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "pink" (TcfGetDefaultLPPDebugPurpose ?cvId cvId))
  (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> snapKeepGenAway (<a class="applied-name" href="fillerfunctions-1.html#TcfSnapBBoxToCell" title="fillerfunctions">TcfSnapBBoxToCell</a>
  elemband
  LibName
  CellName
  Orientation
  (xCoord (lowerLeft (getSGq FullShape bBox)))
  (yCoord (lowerLeft (getSGq FullShape bBox)))
  ?round t) (getSGq FullShape bBox))) noPassShape))
   (getWarn)) )) ) 
  (setq passShapeOr (dbLayerAndNot cvId (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "blue" (TcfGetDefaultLPPDebugPurpose ?cvId cvId))
 (TccFlattenList (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> passShape))
 (TccFlattenList (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> noPassShape))))

  (setq finalNoFillShape (dbLayerAndNot cvId (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "yellow" (TcfGetDefaultLPPDebugPurpose ?cvId cvId))
   (TccFlattenList (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> NoFillShapeOr))
   (TccFlattenList (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> passShapeOr))))

  (setq ToFillShape (dbLayerAndNot cvId (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "green" (TcfGetDefaultLPPDebugPurpose ?cvId cvId))
 (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> FullShape)
 (TccFlattenList (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> finalNoFillShape))
 4)) 
 (TccInfo "TcfFillWithCell" (sprintf nil "For filler cell %L, the dimensions are: %Lx%L"
 fillerCv~>cellName
 (TcfGetXdim fillerCv ?orientation Orientation)
 (TcfGetYdim fillerCv ?orientation Orientation))) 
  (foreachs shape ToFillShape
  (setq shape_bBox (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> snapKeepGenAway (<a class="applied-name" href="fillerfunctions-1.html#TcfSnapBBoxToCell" title="fillerfunctions">TcfSnapBBoxToCell</a> (getSGq shape bBox) LibName CellName Orientation
 (xCoord (lowerLeft (getSGq FullShape bBox)))
 (yCoord (lowerLeft (getSGq FullShape bBox)))
 ?grow nil) (getSGq FullShape bBox))) (setq MosaicX (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX268" title="R5RS Skill/Skill++ form">round</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX258" title="R5RS Skill/Skill++ form">quotient</a> (xCoord (trBBoxDims shape_bBox))
   (TcfGetXdim fillerCv ?orientation Orientation))))
  (setq MosaicY (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX268" title="R5RS Skill/Skill++ form">round</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX258" title="R5RS Skill/Skill++ form">quotient</a> (yCoord (trBBoxDims shape_bBox))
   (TcfGetYdim fillerCv ?orientation Orientation))))

  (when (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX117" title="R5RS Skill/Skill++ form">and</a> (nequal MosaicX 0) (nequal MosaicY 0))
  (TcfCreateInstance cvId LibName CellName
  ?Orientation Orientation
  ?MosaicX (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX340" title="R5RS Skill/Skill++ form">member</a> Orientation rotatedModes) MosaicY MosaicX)
  ?MosaicY (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX340" title="R5RS Skill/Skill++ form">member</a> Orientation rotatedModes) MosaicX MosaicY)
  ?lowerXAlign (plus (xCoord (lowerLeft shape_bBox)) OffsetX)
  ?lowerYAlign (plus (yCoord (lowerLeft shape_bBox)) OffsetY)) 
  (mapcar (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX98" title="R5RS Skill/Skill++ form">lambda</a> (<span class="local-name-binding">x</span>) (dbCreateRect cvId x (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> (rodAddPoints (lowerLeft shape_bBox) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> OffsetX OffsetY))
 (rodAddPoints (upperRight shape_bBox) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> OffsetX OffsetY)))
  )) (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> lstIDLayers (setofs x lstIDLayers (techGetLP techId x)) (setofs y lstBlockingLayers (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX340" title="R5RS Skill/Skill++ form">member</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX325" title="R5RS Skill/Skill++ form">cadr</a> y) (TcfGetDefaultLPPFillerKeepGenAwayPurpose ?cvId cvId)))))) ) 
  (mapcar 'dbDeleteObject (setofs x (TccFlattenList (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> ToFillShape NoFillShape NoFillShapeOr passShape noPassShape passShapeOr finalNoFillShape)) (dbIsId x)))
 (dbClose fillerCv)
 (dbSave cvId)
 t
  )) <a name="TcfSnapBBoxToCell"></a>
<a name="TcfSnapBBoxToCell"></a><span><a href="../fillerfunctions.html#TcfSnapBBoxToCell"><img src="./images/small-prev.gif" title="Skill/Skill++Doc Manual entry" alt="" border="0" /></a> <br /></span>(<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_7.html#IDX173" title="R5RS Skill/Skill++ form">defun</a> <span class="signature">TcfSnapBBoxToCell</span> (bBox LibName CellName Orientation RefX RefY @key (grow t) (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX268" title="R5RS Skill/Skill++ form">round</a> nil))
  (let (shiftY shiftX finalBBox
   (rotatedModes (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> "R90" "R270" "MYR90" "MXR90")))
 (setq shiftY (difference (yCoord (lowerLeft bBox)) RefY))
 (setq shiftX (difference (xCoord (lowerLeft bBox)) RefX))

 (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> <a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX268" title="R5RS Skill/Skill++ form">round</a>
  (progn
 (setq shiftX (TccPutOnGrid shiftX (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX340" title="R5RS Skill/Skill++ form">member</a> Orientation rotatedModes) (TcfGetYdimL LibName CellName) (TcfGetXdimL LibName CellName))))
 (setq shiftY (TccPutOnGrid shiftY (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX340" title="R5RS Skill/Skill++ form">member</a> Orientation rotatedModes) (TcfGetXdimL LibName CellName) (TcfGetYdimL LibName CellName))))
  ) (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> grow
 (progn
   (setq shiftX (TccPutOnGridFloor shiftX (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX340" title="R5RS Skill/Skill++ form">member</a> Orientation rotatedModes) (TcfGetYdimL LibName CellName) (TcfGetXdimL LibName CellName))))
   (setq shiftY (TccPutOnGridFloor shiftY (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX340" title="R5RS Skill/Skill++ form">member</a> Orientation rotatedModes) (TcfGetXdimL LibName CellName) (TcfGetYdimL LibName CellName))))
  ) (progn
 (setq shiftX (TccPutOnGridCeiling shiftX (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX340" title="R5RS Skill/Skill++ form">member</a> Orientation rotatedModes) (TcfGetYdimL LibName CellName) (TcfGetXdimL LibName CellName))))
 (setq shiftY (TccPutOnGridCeiling shiftY (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX340" title="R5RS Skill/Skill++ form">member</a> Orientation rotatedModes) (TcfGetXdimL LibName CellName) (TcfGetYdimL LibName CellName))))
  )) ) (setq finalBBox (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> (plus RefX shiftX) (plus RefY shiftY))))

 (setq shiftY (difference (yCoord (upperRight bBox)) RefY))
 (setq shiftX (difference (xCoord (upperRight bBox)) RefX))

  (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> <a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX268" title="R5RS Skill/Skill++ form">round</a>
  (progn
 (setq shiftX (TccPutOnGrid shiftX (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX340" title="R5RS Skill/Skill++ form">member</a> Orientation rotatedModes) (TcfGetYdimL LibName CellName) (TcfGetXdimL LibName CellName))))
 (setq shiftY (TccPutOnGrid shiftY (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX340" title="R5RS Skill/Skill++ form">member</a> Orientation rotatedModes) (TcfGetXdimL LibName CellName) (TcfGetYdimL LibName CellName))))
  ) (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> grow
 (progn
   (setq shiftX (TccPutOnGridCeiling shiftX (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX340" title="R5RS Skill/Skill++ form">member</a> Orientation rotatedModes) (TcfGetYdimL LibName CellName) (TcfGetXdimL LibName CellName))))
   (setq shiftY (TccPutOnGridCeiling shiftY (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX340" title="R5RS Skill/Skill++ form">member</a> Orientation rotatedModes) (TcfGetXdimL LibName CellName) (TcfGetYdimL LibName CellName))))
  ) (progn
 (setq shiftX (TccPutOnGridFloor shiftX (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX340" title="R5RS Skill/Skill++ form">member</a> Orientation rotatedModes) (TcfGetYdimL LibName CellName) (TcfGetXdimL LibName CellName))))
 (setq shiftY (TccPutOnGridFloor shiftY (<a class="scheme-syntax-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_6.html#IDX103" title="R5RS Skill/Skill++ form">if</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX340" title="R5RS Skill/Skill++ form">member</a> Orientation rotatedModes) (TcfGetXdimL LibName CellName) (TcfGetYdimL LibName CellName))))
  )) ) (setq finalBBox (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX334" title="R5RS Skill/Skill++ form">append</a> finalBBox (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> (<a class="scheme-procedure-name" href="file:///p/advda/elisp/doctool/schemedoc/r5rs/r5rs_8.html#IDX332" title="R5RS Skill/Skill++ form">list</a> (plus RefX shiftX) (plus RefY shiftY)))))
 finalBBox
  )) </pre></font><div>&nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p></div></body></html>